(()=>{"use strict";const e=window.React,t=window.wp.element,a=window.wp.components,n=function({setActiveView:t}){return(0,e.createElement)("div",{className:"atm-hub"},(0,e.createElement)("h2",null,"How can I help you today :)"),(0,e.createElement)("p",{className:"atm-hub-subtitle"},"Generate articles, images, podcasts and many more soon"),(0,e.createElement)("div",{className:"atm-hub-actions"},(0,e.createElement)(a.Button,{isPrimary:!0,onClick:()=>t("articles")},"Generate Articles"),(0,e.createElement)(a.Button,{isPrimary:!0,onClick:()=>t("images")},"Generate Images"),(0,e.createElement)(a.Button,{isPrimary:!0,onClick:()=>t("podcast")},"Generate Podcast"),(0,e.createElement)(a.Button,{isPrimary:!0,onClick:()=>t("graphs")},"Generate Graphs"),(0,e.createElement)(a.Button,{isPrimary:!0,disabled:!0},"Generate Videos"),(0,e.createElement)(a.Button,{isSecondary:!0,disabled:!0},"Coming Soon")),(0,e.createElement)("p",{className:"atm-hub-footer"},"Your Day to Day AI helper, Content AI Studio."))},r=(e,t)=>jQuery.ajax({url:atm_ajax.ajax_url,type:"POST",data:{action:`atm_${e}`,nonce:atm_ajax.nonce,...t}}),o=function({setActiveView:n}){const[o,i]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[s,m]=(0,t.useState)("creative"),[d,u]=(0,t.useState)(""),[w,g]=(0,t.useState)(""),[p,h]=(0,t.useState)(!1);return(0,e.createElement)("div",{className:"atm-generator-view"},(0,e.createElement)("div",{className:"atm-view-header"},(0,e.createElement)("button",{className:"atm-back-btn",onClick:()=>n("hub"),disabled:o},(0,e.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,e.createElement)("h3",null,"Generate Article")),(0,e.createElement)("div",{className:"atm-form-container"},(0,e.createElement)(a.SelectControl,{label:"Article Type",value:s,options:[{label:"Creative Article",value:"creative"},{label:"Latest News Article",value:"news"},{label:"Article from RSS Feed",value:"rss_feed"}],onChange:e=>m(e),disabled:o}),(0,e.createElement)(a.TextControl,{label:"Keyword",value:d,onChange:e=>u(e),placeholder:"e.g., AI in digital marketing",disabled:o}),(0,e.createElement)(a.TextControl,{label:"or Article Title",value:w,onChange:e=>g(e),placeholder:"e.g., 5 Ways AI is Revolutionizing Marketing",disabled:o}),(0,e.createElement)(a.CheckboxControl,{label:"Also generate a featured image",checked:p,onChange:h,disabled:o}),(0,e.createElement)(a.Button,{isPrimary:!0,onClick:async()=>{i(!0),c("Generating...");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const t=await r("generate_article_content",{article_title:w||d});if(!t.success)throw new Error(t.data||"An unknown error occurred.");c("Article generated successfully!"),((e,t)=>{const a=document.body.classList.contains("block-editor-page"),n=window.marked?window.marked.parse(t):t;if(a){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(n),a=wp.data.select("core/block-editor").getBlocks();if(a.length){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(n):jQuery("#content").val(n)})(w||d,t.data.article_content),p?(c("Generating featured image..."),await r("generate_featured_image",{post_id:e,prompt:""}),c("All done! Reloading page to show image..."),setTimeout(()=>window.location.reload(),2e3)):setTimeout(()=>{i(!1),c("")},2e3)}catch(e){c(`Error: ${e.message}`),i(!1)}},disabled:o||!d&&!w},o?(0,e.createElement)(a.Spinner,null):"Generate Article"),l&&(0,e.createElement)("p",{className:"atm-status-message"},l)))},i=function(){const[a,r]=(0,t.useState)(sessionStorage.getItem("atm-active-view")||"hub");return(0,t.useEffect)(()=>{sessionStorage.setItem("atm-active-view",a)},[a]),(0,e.createElement)("div",{className:"atm-studio-container"},(()=>{switch(a){case"articles":return(0,e.createElement)(o,{setActiveView:r});case"images":return(0,e.createElement)("div",null,"Image Generator UI will go here. ",(0,e.createElement)("button",{onClick:()=>r("hub")},"← Back"));default:return(0,e.createElement)(n,{setActiveView:r})}})())};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("atm-studio-root");a&&(0,t.render)((0,e.createElement)(i,null),a)})})();