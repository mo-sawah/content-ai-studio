(()=>{"use strict";var e={20:(e,t,a)=>{var l=a(609),n=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var l,s={},c=null,d=null;for(l in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,l)&&!i.hasOwnProperty(l)&&(s[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===s[l]&&(s[l]=t[l]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:o.current}}},609:e=>{e.exports=window.React},848:(e,t,a)=>{e.exports=a(20)}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}var l=a(609);const n=window.wp.element,r=window.wp.components,o=window.wp.data,i=window.wp.primitives;var s=a(848);const c=(0,s.jsx)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(i.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),d=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),m=function(){const[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(""),[s,m]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[g,h]=(0,n.useState)("default_seo"),[v,b]=(0,n.useState)(""),[w,f]=(0,n.useState)(""),[E,y]=(0,n.useState)("Use Default Model"),[C,_]=(0,n.useState)(""),[S,N]=(0,n.useState)("Default"),[k,x]=(0,n.useState)(""),[A,T]=(0,n.useState)(!1),[M,L]=(0,n.useState)("high"),[P,B]=(0,n.useState)("High Creativity"),{savePost:I}=(0,o.useDispatch)("core/editor"),G=(0,o.useSelect)(e=>e("core/editor").isSavingPost()),O=({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(d.current){const e=d.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}},[t]),(0,l.createElement)("div",{className:"atm-dropdown-field",ref:d},(0,l.createElement)("label",{className:"atm-dropdown-label"},e),(0,l.createElement)(r.DropdownMenu,{className:"atm-custom-dropdown",icon:c,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",onMount:()=>{if(d.current){const e=d.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}}}}),s&&(0,l.createElement)("p",{className:"atm-dropdown-help"},s))},j=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))],D=Object.entries(atm_studio_data.writing_styles).map(([e,{label:t}])=>({label:t,value:e}));return(0,n.useEffect)(()=>{if(!v&&D.length>0){const e=D.find(e=>e.value===g);e&&b(e.label)}},[D,g,v]),(0,l.createElement)("div",{className:"atm-form-container"},(0,l.createElement)(r.TextControl,{label:"Keyword",placeholder:"e.g., AI in digital marketing",value:s,onChange:m,disabled:e||G,help:"The main topic or keyword for your article"}),(0,l.createElement)(r.TextControl,{label:"Article Title (Optional)",placeholder:"Leave empty to auto-generate",value:u,onChange:p,disabled:e||G,help:"Provide a specific title or let AI generate one from your keyword"}),(0,l.createElement)("div",{className:"atm-grid-3"},(0,l.createElement)(O,{label:"AI Model",text:E,options:j,onChange:e=>{f(e.value),y(e.label)},disabled:e||G}),(0,l.createElement)(O,{label:"Writing Style",text:v,options:D,onChange:e=>{h(e.value),b(e.label)},disabled:e||G}),(0,l.createElement)(O,{label:"Creativity Level",text:P,options:[{label:"High Creativity",value:"high"},{label:"Medium Creativity",value:"medium"},{label:"Low Creativity",value:"low"}],onChange:e=>{L(e.value),B(e.label)},disabled:e||G,helpText:"Higher creativity generates more unique and diverse content"})),(0,l.createElement)(O,{label:"Word Count",text:S,options:[{label:"Default",value:""},{label:"Short (~500 words)",value:"500"},{label:"Standard (~800 words)",value:"800"},{label:"Medium (~1200 words)",value:"1200"},{label:"Long (~2000 words)",value:"2000"}],onChange:e=>{_(e.value),N(e.label)},disabled:e||G}),(0,l.createElement)(r.TextareaControl,{label:"Custom Prompt (Optional)",placeholder:"Leave empty to use the selected Writing Style. If you write a prompt here, it will be used instead.",value:k,onChange:x,rows:6,disabled:e||G}),(0,l.createElement)(r.ToggleControl,{label:"Also generate a featured image",help:A?"Featured image will be generated after the article":"Article will be generated without a featured image",checked:A,onChange:T,disabled:e||G,__nextHasNoMarginBottom:!0}),(0,l.createElement)(r.Button,{isPrimary:!0,onClick:async()=>{t(!0),i("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");if(!u&&!s)return alert("Please provide a keyword or an article title."),void t(!1);try{i("Generating article with unique angle...");const t=await d("generate_article_content",{post_id:e,article_title:u,keyword:s,model:w,writing_style:g,custom_prompt:k,word_count:C,creativity_level:M});if(!t.success)throw new Error(t.data);if(console.log("ATM Debug - Response data:",t.data),console.log("ATM Debug - Subtitle received:",t.data.subtitle),((e,t,a)=>{if(window.ATM_BlockUtils)window.ATM_BlockUtils.updateEditorContent(e,t,a);else{console.error("ATM: Block utilities not loaded");const a=window.marked?window.marked.parse(t):t;window.wp&&window.wp.data&&wp.data.dispatch("core/editor").editPost({title:e,content:a})}})(t.data.article_title,t.data.article_content,t.data.subtitle||""),i("✅ Article content inserted!"),t.data.subtitle&&(i("✅ Article inserted! Saving post to apply subtitle..."),await I(),i("✅ Article and subtitle saved!")),A){i("Saving post..."),await I(),i("Generating featured image...");const t=await d("generate_featured_image",{post_id:e,prompt:""});t.success?i("✅ All done! Featured image generated."):(alert("Article was generated and saved, but the image failed: "+t.data),i("✅ Article generated! (Image generation failed)"))}}catch(e){console.error("Generation error:",e),alert("Error: "+e.message),i("⚠ Generation failed. Please try again.")}finally{t(!1)}},disabled:e||G||!s&&!u},e||G?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.Spinner,null),"Generating..."):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z",fill:"currentColor"})),"Generate Creative Article")),a&&(0,l.createElement)("p",{className:"atm-status-message "+(a.includes("✅")?"success":a.includes("⚠")?"error":"info")},a))},u=function({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s}){const d=(0,n.useRef)(null);return(0,l.createElement)("div",{className:"atm-dropdown-field",ref:d},(0,l.createElement)("label",{className:"atm-dropdown-label"},e),(0,l.createElement)(r.DropdownMenu,{className:"atm-custom-dropdown",icon:c,text:t,controls:a.map(e=>({title:e.label,onClick:()=>o(e)})),disabled:i,popoverProps:{className:"atm-popover",style:{"--atm-dropdown-width":d.current?.offsetWidth?`${d.current.offsetWidth}px`:"auto"}}}),s&&(0,l.createElement)("p",{className:"atm-dropdown-help"},s))},p=function(){const e=`${atm_studio_data.plugin_url}assets/images/spin.svg`;return(0,n.createElement)("img",{src:e,className:"atm-custom-spinner",alt:"Loading...",style:{width:"20px",height:"20px"}})},g=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),h=function({setActiveView:e}){const[t,a]=(0,n.useState)(!1),[i,s]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[v,b]=(0,n.useState)("default_seo"),[w,f]=(0,n.useState)("Standard / SEO-Optimized"),[E,y]=(0,n.useState)(""),[C,_]=(0,n.useState)("Use Default Model"),[S,N]=(0,n.useState)(3),[k,x]=(0,n.useState)(800),[A,T]=(0,n.useState)(""),[M,L]=(0,n.useState)(!1),[P,B]=(0,n.useState)(!0),[I,G]=(0,n.useState)(!0),{savePost:O}=(0,o.useDispatch)("core/editor"),j=(0,o.useSelect)(e=>e("core/editor").isSavingPost()),D=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))],R=Object.entries(atm_studio_data.writing_styles).map(([e,{label:t}])=>({label:t,value:e}));return(0,l.createElement)("div",{className:"atm-generator-view"},(0,l.createElement)("div",{className:"atm-form-container"},(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Content Configuration"),(0,l.createElement)(r.TextControl,{label:"Keyword",placeholder:"e.g., The future of renewable energy",value:c,onChange:d,disabled:t||j,help:"The main topic for your multipage article."}),(0,l.createElement)(r.TextControl,{label:"Article Title (Optional)",placeholder:"Leave empty to auto-generate a title",value:m,onChange:h,disabled:t||j,help:"Provide a specific title, or let AI create one from your keyword."}),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)(u,{label:"AI Model",text:C,options:D,onChange:e=>{y(e.value),_(e.label)},disabled:t||j}),(0,l.createElement)(u,{label:"Writing Style",text:w,options:R,onChange:e=>{b(e.value),f(e.label)},disabled:t||j}))),(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Multipage Structure"),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)(r.RangeControl,{label:`Number of Pages: ${S}`,value:S,onChange:N,min:2,max:10,disabled:t||j}),(0,l.createElement)(r.RangeControl,{label:`Words per Page: ~${k}`,value:k,onChange:x,min:100,max:1500,step:50,disabled:t||j}))),(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Advanced Options"),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)(r.ToggleControl,{label:"Enable Web Search",checked:P,onChange:B,disabled:t||j,help:"Use real-time data for accuracy."}),(0,l.createElement)(r.ToggleControl,{label:"Include Subheadlines",checked:I,onChange:G,disabled:t||j,help:"Add H2/H3 tags for structure."})),(0,l.createElement)(r.TextareaControl,{label:"Custom Prompt (Optional)",placeholder:"Add specific instructions here...",value:A,onChange:T,rows:4,disabled:t||j}),(0,l.createElement)(r.CheckboxControl,{label:"Also generate a featured image for the main article",checked:M,onChange:L,disabled:t||j})),(0,l.createElement)("div",{className:"atm-form-actions"},(0,l.createElement)(r.Button,{isPrimary:!0,onClick:async()=>{a(!0),s("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");if(!m&&!c)return alert("Please provide a keyword or an article title."),void a(!1);try{let t=m;if(!t&&c){s("Generating compelling title...");const e=await g("generate_multipage_title",{keyword:c,model:E,page_count:S});if(!e.success)throw new Error(e.data);t=e.data.article_title,h(t)}s("Planning article structure...");const a=await g("generate_multipage_outline",{article_title:t,page_count:S,model:E,writing_style:v,include_subheadlines:I,enable_web_search:P});if(!a.success)throw new Error(a.data);const l=a.data.outline,n=[];for(let e=0;e<S;e++){s(`Writing page ${e+1} of ${S}...`);const a=await g("generate_multipage_content",{article_title:t,page_number:e+1,total_pages:S,page_outline:l.pages[e],words_per_page:k,model:E,writing_style:v,custom_prompt:A,enable_web_search:P,include_subheadlines:I});if(!a.success)throw new Error(a.data);n.push({title:l.pages[e].title,content:a.data.page_content})}s("Saving content and inserting shortcode...");const r=await g("create_multipage_article",{post_id:e,main_title:t,pages:n});if(!r.success)throw new Error(r.data);if(((e,t)=>{if(window.ATM_BlockUtils)window.ATM_BlockUtils.updateEditorContent(e,t,void 0);else{console.error("ATM: Block utilities not loaded");const a=window.marked?window.marked.parse(t):t;window.wp&&window.wp.data&&wp.data.dispatch("core/editor").editPost({title:e,content:a})}})(t,r.data.editor_content),s("✅ Multipage article created successfully!"),M){s("✅ Article created! Saving post to generate image..."),await O(),s("Generating featured image...");const a=await g("generate_featured_image",{post_id:e,prompt:t});if(!a.success)throw new Error("Article created, but image failed: "+a.data);s("✅ All done! Featured image has been set.")}}catch(e){console.error("Generation error:",e),s(`⌁ Generation failed: ${e.message}`)}finally{a(!1)}},disabled:t||j||!c&&!m},t||j?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(p,null)," Generating..."):"Generate Multipage Article")),i&&(0,l.createElement)("p",{className:"atm-status-message "+(i.includes("✅")?"success":i.includes("⌁")?"error":"info")},i)))},v=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),b=function(){const[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(""),[s,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[p,g]=(0,n.useState)(10),[h,b]=(0,n.useState)(""),[w,f]=(0,n.useState)("Technology"),[E,y]=(0,n.useState)(!1),[C,_]=(0,n.useState)(!0),[S,N]=(0,n.useState)(""),[k,x]=(0,n.useState)("Use Default Model"),[A,T]=(0,n.useState)(""),[M,L]=(0,n.useState)(!1),{savePost:P}=(0,o.useDispatch)("core/editor"),B=(0,o.useSelect)(e=>e("core/editor").isSavingPost()),I=({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(d.current){const e=d.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}},[t]),(0,l.createElement)("div",{className:"atm-dropdown-field",ref:d},(0,l.createElement)("label",{className:"atm-dropdown-label"},e),(0,l.createElement)(r.DropdownMenu,{className:"atm-custom-dropdown",icon:c,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",onMount:()=>{if(d.current){const e=d.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}}}}),s&&(0,l.createElement)("p",{className:"atm-dropdown-help"},s))},G=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))];return(0,l.createElement)("div",{className:"atm-form-container"},(0,l.createElement)(r.TextControl,{label:"Topic or Theme",placeholder:"e.g., best productivity apps, top marketing tools",value:s,onChange:d,disabled:e||B,help:"The main topic for your listicle (what you want to list)"}),(0,l.createElement)(r.TextControl,{label:"Custom Title (Optional)",placeholder:"Leave empty to auto-generate",value:m,onChange:u,disabled:e||B,help:"Provide a specific title or let AI generate one from your topic"}),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)("div",null,(0,l.createElement)(r.RangeControl,{label:`Number of Items: ${p}`,value:p,onChange:g,min:5,max:25,disabled:e||B,help:"How many items to include in your list"})),(0,l.createElement)(I,{label:"Category",text:w,options:[{label:"Technology",value:"technology"},{label:"Business",value:"business"},{label:"Health & Fitness",value:"health"},{label:"Travel",value:"travel"},{label:"Food & Cooking",value:"food"},{label:"Fashion & Beauty",value:"fashion"},{label:"Home & Garden",value:"home"},{label:"Entertainment",value:"entertainment"},{label:"Education",value:"education"},{label:"Finance",value:"finance"},{label:"Lifestyle",value:"lifestyle"},{label:"Sports",value:"sports"}],onChange:e=>{b(e.value),f(e.label)},disabled:e||B,helpText:"Category helps generate more relevant content"})),(0,l.createElement)(I,{label:"AI Model",text:k,options:G,onChange:e=>{N(e.value),x(e.label)},disabled:e||B}),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)(r.CheckboxControl,{label:"Include pricing information",checked:E,onChange:y,disabled:e||B,help:"Add price details when relevant"}),(0,l.createElement)(r.CheckboxControl,{label:"Include ratings/scores",checked:C,onChange:_,disabled:e||B,help:"Add star ratings or numerical scores"})),(0,l.createElement)(r.TextareaControl,{label:"Custom Instructions (Optional)",placeholder:"Add specific requirements, tone, or focus areas...",value:A,onChange:T,rows:4,disabled:e||B,help:"Additional instructions to customize the listicle content"}),(0,l.createElement)(r.CheckboxControl,{label:"Also generate a featured image",checked:M,onChange:L,disabled:e||B}),(0,l.createElement)(r.Button,{isPrimary:!0,onClick:async()=>{t(!0),i("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id"),a=m||s;if(!a)return alert("Please provide a topic or article title."),void t(!1);try{let t=m;if(!t&&s){i("Generating compelling listicle title...");const e=await v("generate_listicle_title",{topic:s,item_count:p,category:h,model:S});if(!e.success)throw new Error(e.data);t=e.data.article_title}i("Creating listicle content...");const l=await v("generate_listicle_content",{post_id:e,article_title:t,topic:a,item_count:p,category:h,include_pricing:E,include_ratings:C,model:S,custom_prompt:A});if(!l.success)throw new Error(l.data);if(((e,t,a)=>{if(window.ATM_BlockUtils)window.ATM_BlockUtils.updateEditorContent(e,t,a);else{console.error("ATM: Block utilities not loaded");const a=window.marked?window.marked.parse(t):t;window.wp&&window.wp.data&&wp.data.dispatch("core/editor").editPost({title:e,content:a})}})(t,l.data.article_content,l.data.subtitle||""),i("✅ Listicle article created successfully!"),l.data.subtitle&&(i("✅ Article inserted! Saving post to apply subtitle..."),await P(),i("✅ Listicle article and subtitle saved!")),M){i("Saving post..."),await P(),i("Generating featured image...");const a=await v("generate_featured_image",{post_id:e,prompt:`A modern, clean illustration representing: ${t}`});a.success?i("✅ All done! Featured image generated."):(alert("Article was generated and saved, but the image failed: "+a.data),i("✅ Listicle generated! (Image generation failed)"))}}catch(e){console.error("Generation error:",e),alert("Error: "+e.message),i("⚠ Generation failed. Please try again.")}finally{t(!1)}},disabled:e||B||!s&&!m},e||B?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.Spinner,null),"Generating..."):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7h.01M9 12h.01m0 4h.01m3-6h4m-4 4h4m2-5h.01M21 12h.01",fill:"currentColor"})),"Generate Listicle Article")),a&&(0,l.createElement)("p",{className:"atm-status-message "+(a.includes("✅")?"success":a.includes("⚠")?"error":"info")},a))},w=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),f=[{label:"Global",value:""},{label:"United States",value:"US"},{label:"United Kingdom",value:"GB"},{label:"Canada",value:"CA"},{label:"Australia",value:"AU"},{label:"Germany",value:"DE"},{label:"France",value:"FR"},{label:"India",value:"IN"},{label:"Brazil",value:"BR"},{label:"Japan",value:"JP"},{label:"Mexico",value:"MX"},{label:"Spain",value:"ES"},{label:"Italy",value:"IT"},{label:"Russia",value:"RU"},{label:"South Korea",value:"KR"},{label:"Netherlands",value:"NL"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Turkey",value:"TR"},{label:"Argentina",value:"AR"}],E=[{label:"English",value:"en"},{label:"Spanish",value:"es"},{label:"French",value:"fr"},{label:"German",value:"de"},{label:"Italian",value:"it"},{label:"Portuguese",value:"pt"},{label:"Russian",value:"ru"},{label:"Chinese",value:"zh"},{label:"Japanese",value:"ja"},{label:"Korean",value:"ko"},{label:"Arabic",value:"ar"},{label:"Dutch",value:"nl"},{label:"Swedish",value:"sv"},{label:"Turkish",value:"tr"},{label:"Hindi",value:"hi"}],y=f.map(e=>e.label),C=E.map(e=>e.label),_=Object.fromEntries(f.map(e=>[e.label,e.value])),S=Object.fromEntries(E.map(e=>[e.label,e.value])),N=({label:e,placeholder:t,options:a,value:r,onChange:o,disabled:i=!1})=>{const[s,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(""),u=(0,n.useRef)(null),p=(0,n.useRef)(null),g=a.filter(e=>e.toLowerCase().includes(d.toLowerCase()));return(0,n.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&(c(!1),m(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.createElement)("div",{className:"atm-advanced-filter",ref:u},(0,l.createElement)("label",{className:"atm-filter-label"},e),(0,l.createElement)("div",{className:`atm-filter-input-container ${s?"open":""} ${i?"disabled":""}`,onClick:()=>!i&&c(!0)},(0,l.createElement)("div",{className:"atm-single-value"},r||t),(0,l.createElement)("svg",{className:"atm-filter-chevron "+(s?"open":""),width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},(0,l.createElement)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))),s&&(0,l.createElement)("div",{className:"atm-filter-dropdown"},(0,l.createElement)("input",{ref:p,type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Search...",className:"atm-filter-input-search",autoFocus:!0}),(0,l.createElement)("div",{className:"atm-filter-options-list"},g.length>0?g.map(e=>(0,l.createElement)("div",{key:e,className:"atm-filter-option "+(r===e?"selected":""),onClick:()=>(e=>{o(e),c(!1),m("")})(e)},e)):(0,l.createElement)("div",{className:"atm-filter-no-results"},"No results found"))))},k=()=>{const[e,t]=(0,n.useState)(""),[a,i]=(0,n.useState)([]),[s,d]=(0,n.useState)([]),[m,u]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[h,v]=(0,n.useState)({text:"",type:""}),[b,f]=(0,n.useState)(!1),{savePost:E}=(0,o.useDispatch)("core/editor"),[k,x]=(0,n.useState)("Global"),[A,T]=(0,n.useState)("English"),[M,L]=(0,n.useState)({label:"Past Day",value:"now 1-d"}),[P,B]=(0,n.useState)({writingStyle:{label:"News / Journalistic",value:"News / Journalistic"},wordCount:{label:"Medium (~800 words)",value:"800-1200"},includeImages:!0,autoPublish:!1}),I=Object.entries(atm_studio_data.writing_styles).map(([e,{label:t}])=>({label:t,value:e})),G=(e=>{const t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{const e=t.current;if(!e)return;let a,l,n=!1;const r=t=>{n=!0,e.classList.add("active"),a=t.pageX-e.offsetLeft,l=e.scrollLeft},o=()=>{n=!1,e.classList.remove("active")},i=()=>{n=!1,e.classList.remove("active")},s=t=>{if(!n)return;t.preventDefault();const r=2*(t.pageX-e.offsetLeft-a);e.scrollLeft=l-r};return e.addEventListener("mousedown",r),e.addEventListener("mouseleave",o),e.addEventListener("mouseup",i),e.addEventListener("mousemove",s),()=>{e.removeEventListener("mousedown",r),e.removeEventListener("mouseleave",o),e.removeEventListener("mouseup",i),e.removeEventListener("mousemove",s)}},[e]),t})(a),O=async(e="")=>{u(!0),v({text:"Searching Google Trends...",type:"info"}),i([]),d([]);try{var t,a;const l=null!==(t=_[k])&&void 0!==t?t:"",n=null!==(a=S[A])&&void 0!==a?a:"en",r=await w("fetch_trending_topics",{keyword:e,region:l,language:n,date:M.value,force_fresh:b});if(!r.success)throw new Error(r.data);i(r.data.trends||[]),v({text:r.data.trends?.length?`Found ${r.data.trends.length} unique trending topics.`:"No trending topics found. Try a different keyword or timeframe.",type:"info"})}catch(e){v({text:`Error: ${e.message}`,type:"error"})}finally{u(!1)}};return(0,l.createElement)("div",{className:"atm-form-container"},(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h3",{className:"atm-section-title"},"Find Trending Topics"),(0,l.createElement)(r.TextControl,{label:"Keyword",value:e,onChange:t,placeholder:"e.g., AI, renewable energy, summer movies...",help:"Search for trends related to a specific topic."}),(0,l.createElement)("div",{className:"atm-form-grid",style:{gridTemplateColumns:"repeat(3, 1fr)"}},(0,l.createElement)(N,{label:"Region",placeholder:"Select a region...",options:y,value:k,onChange:x,disabled:m||p}),(0,l.createElement)(N,{label:"Language",placeholder:"Select a language...",options:C,value:A,onChange:T,disabled:m||p}),(0,l.createElement)("div",{className:"atm-simple-dropdown-wrapper"},(0,l.createElement)("label",{className:"atm-filter-label"},"Date"),(0,l.createElement)(r.DropdownMenu,{icon:c,text:M.label,controls:[{label:"Past Day",value:"now 1-d"},{label:"Past Week",value:"now 7-d"},{label:"Past Month",value:"today 1-m"},{label:"Past Year",value:"today 12-m"}].map(e=>({title:e.label,onClick:()=>L(e)})),disabled:m||p}))),(0,l.createElement)("div",{className:"atm-form-actions-column"},(0,l.createElement)(r.ToggleControl,{label:"Force Fresh Results",help:"Bypass the 1-hour cache to get new data.",checked:b,onChange:f}),(0,l.createElement)("div",{className:"atm-search-buttons-wrapper"},(0,l.createElement)(r.Button,{isSecondary:!0,onClick:()=>O(e.trim()),disabled:m||p||!e.trim()},"Search with Keyword"),(0,l.createElement)(r.Button,{isPrimary:!0,onClick:()=>O(""),disabled:m||p},"Fetch Top Trends")))),h.text&&(0,l.createElement)("p",{className:`atm-status-message ${h.type}`},h.text),!m&&a.length>0&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"atm-trending-topics-grid"},a.map((e,t)=>(0,l.createElement)("div",{key:t,className:"atm-topic-card "+(s.some(t=>t.title===e.title)?"selected":"")},(0,l.createElement)("div",{className:"atm-card-header"},(0,l.createElement)(r.CheckboxControl,{checked:s.some(t=>t.title===e.title),onChange:t=>((e,t)=>{d(t?t=>[...t,e]:t=>t.filter(t=>t.title!==e.title))})(e,t),disabled:p}),(0,l.createElement)("h4",{className:"atm-card-title"},e.title)),(0,l.createElement)("div",{className:"atm-card-body"},(0,l.createElement)("p",{className:"atm-card-snippet"},e.snippet),(0,l.createElement)("div",{className:"atm-card-meta"},(0,l.createElement)("span",{className:"atm-card-traffic"},"🔥 ",e.traffic),(0,l.createElement)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"atm-card-link"},"View on Google Trends ↗")),(e.related_keywords?.length>0||e.related_trends?.length>0)&&(0,l.createElement)("div",{className:"atm-related-keywords"},(0,l.createElement)("strong",null,"Related:"),e.related_keywords?.length>0&&(0,l.createElement)("ul",null,e.related_keywords.slice(0,3).map(e=>(0,l.createElement)("li",{key:e},e))),e.related_trends?.length>0&&(0,l.createElement)("div",{className:"atm-related-trends-scroll",ref:G},e.related_trends.map(e=>(0,l.createElement)("div",{key:e.title,className:"atm-related-trend-item"},e.title," ",(0,l.createElement)("span",{className:"traffic"},"(",e.traffic,")"))))))))),(0,l.createElement)("div",{className:"atm-form-section atm-generation-actions"},(0,l.createElement)("h3",{className:"atm-section-title"},`Generate ${s.length} Article(s)`),(0,l.createElement)("div",{className:"atm-form-grid",style:{gridTemplateColumns:"1fr 1fr"}},(0,l.createElement)(r.DropdownMenu,{icon:c,text:P.writingStyle.label,label:"Writing Style",controls:I.map(e=>({title:e.label,onClick:()=>B(t=>({...t,writingStyle:e}))})),disabled:p||0===s.length}),(0,l.createElement)(r.DropdownMenu,{icon:c,text:P.wordCount.label,label:"Word Count",controls:[{label:"Short (~500 words)",value:"500"},{label:"Medium (~800 words)",value:"800-1200"},{label:"Long (~1500 words)",value:"1500-2000"}].map(e=>({title:e.label,onClick:()=>B(t=>({...t,wordCount:e}))})),disabled:p||0===s.length})),(0,l.createElement)("div",{className:"atm-form-grid",style:{gridTemplateColumns:"1fr 1fr"}},(0,l.createElement)(r.ToggleControl,{label:"Generate a featured image",help:"A relevant image will be generated and set as the post's featured image.",checked:P.includeImages,onChange:e=>B(t=>({...t,includeImages:e})),disabled:p||0===s.length}),s.length>1&&(0,l.createElement)(r.ToggleControl,{label:"Auto-publish articles",help:"Otherwise save as draft",checked:P.autoPublish,onChange:e=>B(t=>({...t,autoPublish:e})),disabled:p||0===s.length})),(0,l.createElement)(r.Button,{isPrimary:!0,onClick:async()=>{if(0===s.length)return void v({text:"Please select at least one topic.",type:"error"});g(!0);const e={...P,writingStyle:P.writingStyle.value,wordCount:P.wordCount.value};if(1===s.length){v({text:"Generating article...",type:"info"});try{S[A];const t=await w("generate_single_trending_article",{trending_topic:JSON.stringify(s[0]),settings:JSON.stringify(e),language:A});if(!t.success)throw new Error(t.data);if(((e,t,a)=>{if(window.ATM_BlockUtils)window.ATM_BlockUtils.updateEditorContent(e,t,a);else{const a=window.marked?window.marked.parse(t):t;window.wp?.data&&wp.data.dispatch("core/editor").editPost({title:e,content:a})}})(t.data.article_title,t.data.article_content,t.data.subtitle),v({text:"✅ Article inserted! Saving post...",type:"success"}),await E(),P.includeImages){v({text:"✅ Post saved. Generating featured image...",type:"info"});const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");await w("generate_featured_image",{post_id:e,prompt:""}),v({text:"✅ All done! Article and featured image generated.",type:"success"})}else v({text:"✅ Article inserted and saved!",type:"success"});d([])}catch(e){v({text:`Error: ${e.message}`,type:"error"})}finally{g(!1)}}else{v({text:`Generating ${s.length} new draft posts...`,type:"info"});try{S[A];const t=await w("generate_trending_articles",{trending_topics:JSON.stringify(s),settings:JSON.stringify(e),language:A});if(!t.success)throw new Error(t.data);v({text:`✅ Successfully created ${t.data.successful_count} new draft posts!`,type:"success"}),d([])}catch(e){v({text:`Error: ${e.message}`,type:"error"})}finally{g(!1)}}},disabled:p||0===s.length},p?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.Spinner,null),"Generating..."):`Generate ${s.length>0?s.length:""} Selected Article(s)`),s.length>1&&(0,l.createElement)("p",{className:"components-base-control__help"},"When generating multiple articles, new draft posts will be created."))))},x=function({setActiveView:e}){const[t,a]=(0,n.useState)("creative"),r=[{id:"creative",title:"Standard Articles",description:"Create high-quality SEO content with AI",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),gradient:"from-blue-500 to-purple-600"},{id:"trending",title:"Trending Articles",description:"Generate content on current hot topics",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})),gradient:"from-red-500 to-pink-600"},{id:"listicle",title:"Listicle Articles",description:"Create numbered lists and top 10 style content",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7h.01M9 12h.01m0 4h.01m3-6h4m-4 4h4m2-5h.01M21 12h.01"})),gradient:"from-green-500 to-emerald-600"},{id:"multipage",title:"Multipage Articles",description:"Create comprehensive, multi-part guides",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 002-2V7a2 2 0 00-2-2H9a2 2 0 00-2 2v12a2 2 0 002 2h10z"})),gradient:"from-yellow-500 to-amber-600"}];return(0,l.createElement)("div",{className:"atm-generator-view"},(0,l.createElement)("div",{className:"atm-type-selector"},(0,l.createElement)("div",{className:"atm-type-cards"},r.map(e=>(0,l.createElement)("div",{key:e.id,className:"atm-type-card "+(t===e.id?"active":""),onClick:()=>a(e.id)},(0,l.createElement)("div",{className:`atm-type-icon bg-gradient-to-r ${e.gradient}`},e.icon),(0,l.createElement)("div",{className:"atm-type-content"},(0,l.createElement)("h3",null,e.title),(0,l.createElement)("p",null,e.description)))))),(0,l.createElement)("div",{className:"atm-tab-content"},"creative"===t&&(0,l.createElement)(m,null),"trending"===t&&(0,l.createElement)(k,null),"listicle"===t&&(0,l.createElement)(b,null),"multipage"===t&&(0,l.createElement)(h,null)))},A=[{label:"Admin User",value:"1"}],T=[{label:"Uncategorized",value:"1"},{label:"News",value:"2"}],M=function(){const[e,t]=(0,n.useState)(""),[a,o]=(0,n.useState)(1),[i,s]=(0,n.useState)("hour"),[c,d]=(0,n.useState)(0),[m,u]=(0,n.useState)("publish"),[p,g]=(0,n.useState)("1"),[h,v]=(0,n.useState)("1"),[b,w]=(0,n.useState)(!0);return(0,l.createElement)("div",{className:"atm-form-container"},(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Campaign Settings"),(0,l.createElement)(r.TextControl,{label:"Campaign Name",value:e,onChange:t,placeholder:"e.g., Daily AI Tech Articles",help:"Give your campaign a memorable name.",required:!0})),(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Content Source"),(0,l.createElement)("p",{className:"components-base-control__help",style:{marginTop:"-1rem",marginBottom:"1.5rem"}},"Configure the content settings below. The automation will use these settings to generate each new article."),(0,l.createElement)(x,{setActiveView:()=>{}})),(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Scheduling"),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},(0,l.createElement)(r.TextControl,{label:"Frequency",type:"number",value:a,onChange:e=>o(parseInt(e,10)),min:"1",step:"1"}),(0,l.createElement)(r.SelectControl,{label:"Unit",value:i,onChange:s,options:[{label:"Minutes",value:"minute"},{label:"Hours",value:"hour"},{label:"Days",value:"day"},{label:"Weeks",value:"week"}],help:"Minimum 10 minutes."})),(0,l.createElement)(r.TextControl,{label:"Max Posts (Optional)",type:"number",value:c,onChange:e=>d(parseInt(e,10)),min:"0",help:"Set to 0 for unlimited posts. The campaign will pause after reaching this number."}))),(0,l.createElement)("div",{className:"atm-form-section"},(0,l.createElement)("h4",{className:"atm-section-title"},"Post Settings"),(0,l.createElement)("div",{className:"atm-grid-2"},(0,l.createElement)(r.SelectControl,{label:"Author",value:p,options:A,onChange:g}),(0,l.createElement)(r.SelectControl,{label:"Category",value:h,options:T,onChange:v})),(0,l.createElement)("div",{className:"atm-grid-2",style:{marginTop:"1rem"}},(0,l.createElement)(r.SelectControl,{label:"Post Status",value:m,onChange:u,options:[{label:"Publish Immediately",value:"publish"},{label:"Save as Draft",value:"draft"},{label:"Schedule for Later",value:"scheduled"}],help:"Choose the status for newly created posts."}),(0,l.createElement)(r.ToggleControl,{label:"Generate Featured Image",checked:b,onChange:w,help:"Automatically generate and set a featured image for each post."}))),(0,l.createElement)("div",{className:"atm-form-actions"},(0,l.createElement)(r.Button,{isPrimary:!0,onClick:()=>{alert("Campaign saving logic will be implemented in Phase 3!");const t={name:e,type:"article",schedule:{value:a,unit:i,maxPosts:c},postSettings:{status:m,author:p,category:h,image:b}};console.log("Campaign Settings to Save:",t)},disabled:!e},"Save Campaign")))},L=function(){const[e,t]=(0,n.useState)("articles"),a=[{id:"articles",label:"General Articles",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"}," ",(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})," "),color:"#6366f1"},{id:"news",label:"Automated News",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"}," ",(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h14l2 2v12a2 2 0 01-2 2zM3 4h16M7 8h10M7 12h6"})," "),color:"#059669"},{id:"videos",label:"Auto Videos",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"}," ",(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})," "),color:"#ef4444"},{id:"podcasts",label:"Auto Podcast",icon:(0,l.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"}," ",(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})," "),color:"#f97316"}];return(0,l.createElement)("div",{className:"atm-studio-wrapper"},(0,l.createElement)("div",{className:"atm-sidebar"},(0,l.createElement)("div",{className:"atm-sidebar-header"},(0,l.createElement)("h2",null,"AI Automation"),(0,l.createElement)("p",null,"Campaign Manager")),(0,l.createElement)("div",{className:"atm-nav-section"},(0,l.createElement)("div",{className:"atm-nav-section-title"},"CAMPAIGN TYPES"),a.map(a=>(0,l.createElement)("button",{key:a.id,className:"atm-nav-item "+(e===a.id?"active":""),onClick:()=>t(a.id)},(0,l.createElement)("span",{className:"atm-nav-icon",style:{color:e===a.id?a.color:"rgba(255, 255, 255, 0.6)"}},a.icon),a.label)))),(0,l.createElement)("div",{className:"atm-main-content"},(0,l.createElement)("div",{className:"atm-content-header"},(0,l.createElement)("h1",{className:"atm-content-title"},a.find(t=>t.id===e)?.label||"AI Automation"),(0,l.createElement)("p",{className:"atm-content-subtitle"},"Configure and schedule your automated content campaign.")),(0,l.createElement)("div",{className:"atm-content-body"},(0,l.createElement)(M,null))))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("atm-automation-root");e?(0,n.render)((0,l.createElement)(L,null),e):console.error("ATM: Automation root element not found")});const P=document.getElementById("atm-automation-root");P&&(0,n.render)((0,l.createElement)(L,null),P)})();