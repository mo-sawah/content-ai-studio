(()=>{"use strict";var e={20:(e,t,a)=>{var n=a(609),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var n,s={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,n)&&!i.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:o.current}}},609:e=>{e.exports=window.React},848:(e,t,a)=>{e.exports=a(20)}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}var n=a(609);const r=window.wp.element,l=window.wp.components,o=function({setActiveView:e}){const t=[{id:"articles",title:"Generate Articles",description:"Create high-quality content with AI assistance",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),gradient:"from-blue-500 to-purple-600",onClick:()=>e("articles")},{id:"news",title:"Generate News",description:"Create articles from RSS feeds and live news sources",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h14l2 2v12a2 2 0 01-2 2zM3 4h16M7 8h10M7 12h6"})),gradient:"from-emerald-500 to-green-600",onClick:()=>e("news")},{id:"humanize",title:"Humanize Content",description:"Transform AI text into natural, human‑sounding copy",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.813 15.904l-1.023 2.558a.75.75 0 01-1.38 0l-1.023-2.558-2.558-1.023a.75.75 0 010-1.38l2.558-1.023 1.023-2.558a.75.75 0 011.38 0l1.023 2.558 2.558 1.023a.75.75 0 010 1.38l-2.558 1.023zM14.5 4.75l.75 1.875 1.875.75-1.875.75-.75 1.875-.75-1.875-1.875-.75 1.875-.75zM19.5 13.25l.5 1.25 1.25.5-1.25.5-.5 1.25-.5-1.25-1.25-.5 1.25-.5z"})),gradient:"from-violet-500 to-fuchsia-600",onClick:()=>e("humanize")},{id:"images",title:"Generate Images",description:"Create stunning visuals powered by Top AI",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),gradient:"from-green-500 to-teal-600",onClick:()=>e("images")},{id:"podcast",title:"Generate Podcast",description:"Turn content into engaging audio experiences",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})),gradient:"from-orange-500 to-red-600",onClick:()=>e("podcast")},{id:"takeaways",title:"Key Takeaways",description:"Extract insights from your content",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})),gradient:"from-pink-500 to-purple-600",onClick:()=>e("takeaways")},{id:"comments",title:"Generate Comments",description:"Create realistic discussion threads based on your post",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h6M4 17v-8a3 3 0 013-3h10a3 3 0 013 3v5a3 3 0 01-3 3H9l-3 3v-3"})),gradient:"from-cyan-500 to-purple-600",onClick:()=>e("comments")},{id:"speech",title:"Speech to Text",description:"Convert audio into accurate text in the editor",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})),gradient:"from-indigo-500 to-blue-600",onClick:()=>e("speech")},{id:"translate",title:"Translate Text",description:"Translate content across all popular languages",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})),gradient:"from-cyan-500 to-teal-600",onClick:()=>e("translate")},{id:"video",title:"Video Search",description:"Find and embed YouTube videos",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})),gradient:"from-red-500 to-pink-600",onClick:()=>e("video")},{id:"charts",title:"Generate Charts",description:"Create beautiful data visualizations",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),gradient:"from-emerald-500 to-green-600",onClick:()=>e("charts")}];return(0,n.createElement)("div",{className:"atm-hub-welcome"},(0,n.createElement)("div",{className:"atm-welcome-header"},(0,n.createElement)("h2",null,"Welcome to AI Studio"),(0,n.createElement)("p",null,"Your all-in-one content creation suite powered by artificial intelligence. Choose from our powerful tools below to get started creating amazing content.")),(0,n.createElement)("div",{className:"atm-quick-actions"},t.map(e=>(0,n.createElement)("div",{key:e.id,className:"atm-quick-action-card",onClick:e.onClick},(0,n.createElement)("div",{className:`atm-action-icon bg-gradient-to-r ${e.gradient}`},e.icon),(0,n.createElement)("h3",null,e.title),(0,n.createElement)("p",null,e.description)))),(0,n.createElement)("div",{className:"atm-welcome-stats"},(0,n.createElement)("div",{className:"atm-stat-item"},(0,n.createElement)("div",{className:"atm-stat-number"},"9"),(0,n.createElement)("div",{className:"atm-stat-label"},"AI Tools")),(0,n.createElement)("div",{className:"atm-stat-item"},(0,n.createElement)("div",{className:"atm-stat-number"},"∞"),(0,n.createElement)("div",{className:"atm-stat-label"},"Possibilities")),(0,n.createElement)("div",{className:"atm-stat-item"},(0,n.createElement)("div",{className:"atm-stat-number"},"100%"),(0,n.createElement)("div",{className:"atm-stat-label"},"AI Powered"))),(0,n.createElement)("div",{className:"atm-welcome-footer"},(0,n.createElement)("p",null,"Need help getting started? Check out our"," ",(0,n.createElement)(l.Button,{isLink:!0,onClick:()=>window.open("https://docs.example.com","_blank")},"documentation")," ","or"," ",(0,n.createElement)(l.Button,{isLink:!0,onClick:()=>window.open("https://support.example.com","_blank")},"contact support"),".")))},i=window.wp.data,s=window.wp.primitives;var c=a(848);const d=(0,c.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(s.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),m=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),u=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[g,h]=(0,r.useState)("default_seo"),[v,w]=(0,r.useState)(""),[E,b]=(0,r.useState)(""),[f,y]=(0,r.useState)("Use Default Model"),[k,_]=(0,r.useState)(""),[S,C]=(0,r.useState)("Default"),[N,x]=(0,r.useState)(""),[T,A]=(0,r.useState)(!1),{savePost:M}=(0,i.useDispatch)("core/editor"),P=(0,i.useSelect)(e=>e("core/editor").isSavingPost()),L=({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(c.current){const e=c.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}},[t]),(0,n.createElement)("div",{className:"atm-dropdown-field",ref:c},(0,n.createElement)("label",{className:"atm-dropdown-label"},e),(0,n.createElement)(l.DropdownMenu,{className:"atm-custom-dropdown",icon:d,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",onMount:()=>{if(c.current){const e=c.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}}}}),s&&(0,n.createElement)("p",{className:"atm-dropdown-help"},s))},j=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))],B=Object.entries(atm_studio_data.writing_styles).map(([e,{label:t}])=>({label:t,value:e}));return(0,r.useEffect)(()=>{if(!v&&B.length>0){const e=B.find(e=>e.value===g);e&&w(e.label)}},[B,g,v]),(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.TextControl,{label:"Keyword",placeholder:"e.g., AI in digital marketing",value:s,onChange:c,disabled:e||P,help:"The main topic or keyword for your article"}),(0,n.createElement)(l.TextControl,{label:"Article Title (Optional)",placeholder:"Leave empty to auto-generate",value:u,onChange:p,disabled:e||P,help:"Provide a specific title or let AI generate one from your keyword"}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(L,{label:"AI Model",text:f,options:j,onChange:e=>{b(e.value),y(e.label)},disabled:e||P}),(0,n.createElement)(L,{label:"Writing Style",text:v,options:B,onChange:e=>{h(e.value),w(e.label)},disabled:e||P})),(0,n.createElement)(L,{label:"Word Count",text:S,options:[{label:"Default",value:""},{label:"Short (~500 words)",value:"500"},{label:"Standard (~800 words)",value:"800"},{label:"Medium (~1200 words)",value:"1200"},{label:"Long (~2000 words)",value:"2000"}],onChange:e=>{_(e.value),C(e.label)},disabled:e||P}),(0,n.createElement)(l.TextareaControl,{label:"Custom Prompt (Optional)",placeholder:"Leave empty to use the selected Writing Style. If you write a prompt here, it will be used instead.",value:N,onChange:x,rows:6,disabled:e||P}),(0,n.createElement)(l.CheckboxControl,{label:"Also generate a featured image",checked:T,onChange:A,disabled:e||P}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{t(!0),o("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");if(!u&&!s)return alert("Please provide a keyword or an article title."),void t(!1);try{let t=u;if(!t&&s){o("Generating compelling title...");const e=await m("generate_article_title",{keyword:s,model:E});if(!e.success)throw new Error(e.data);t=e.data.article_title}o("Writing article content...");const a=await m("generate_article_content",{post_id:e,article_title:t,model:E,writing_style:g,custom_prompt:N,word_count:k});if(!a.success)throw new Error(a.data);if(console.log("ATM Debug - Response data:",a.data),console.log("ATM Debug - Subtitle received:",a.data.subtitle),((e,t,a)=>{if(document.body.classList.contains("block-editor-page")){wp.data.dispatch("core/editor").editPost({title:e});const a=window.marked?window.marked.parse(t):t,n=wp.data.select("core/block-editor").getBlocks();if(n.length>0){const e=n.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}const r=(e=>{const t=document.createElement("div");t.innerHTML=e;const a=[];return Array.from(t.children).forEach(e=>{switch(e.tagName.toLowerCase()){case"h1":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:1}));break;case"h2":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:2}));break;case"h3":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:3}));break;case"h4":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:4}));break;case"h5":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:5}));break;case"h6":a.push(wp.blocks.createBlock("core/heading",{content:e.innerHTML,level:6}));break;case"ul":a.push(wp.blocks.createBlock("core/list",{values:e.outerHTML}));break;case"ol":a.push(wp.blocks.createBlock("core/list",{ordered:!0,values:e.outerHTML}));break;case"blockquote":a.push(wp.blocks.createBlock("core/quote",{value:e.innerHTML}));break;default:e.innerHTML.trim()&&a.push(wp.blocks.createBlock("core/paragraph",{content:e.innerHTML}))}}),a})(a);wp.data.dispatch("core/block-editor").insertBlocks(r)}else{const a=window.marked?window.marked.parse(t):t;jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(a):jQuery("#content").val(a)}a&&a.trim()&&(console.log("ATM: Attempting to populate subtitle:",a),setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0?(console.log("ATM: Found SmartMag subtitle field, populating..."),e.val(a),e.trigger("input").trigger("change").trigger("keyup"),console.log("ATM: Subtitle populated successfully")):console.log("ATM: SmartMag subtitle field not found")},1e3))})(t,a.data.article_content,a.data.subtitle||""),o("✅ Article content inserted!"),a.data.subtitle&&(o("✅ Article inserted! Saving post to apply subtitle..."),await M(),o("✅ Article and subtitle saved!")),T){o("Saving post..."),await M(),o("Generating featured image...");const t=await m("generate_featured_image",{post_id:e,prompt:""});t.success?o("✅ All done! Featured image generated."):(alert("Article was generated and saved, but the image failed: "+t.data),o("✅ Article generated! (Image generation failed)"))}}catch(e){console.error("Generation error:",e),alert("Error: "+e.message),o("⚠ Generation failed. Please try again.")}finally{t(!1)}},disabled:e||P||!s&&!u},e||P?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Generating..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z",fill:"currentColor"})),"Generate Creative Article")),a&&(0,n.createElement)("p",{className:"atm-status-message "+(a.includes("✅")?"success":a.includes("⚠")?"error":"info")},a))},p=function({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s}){const c=(0,r.useRef)(null);return(0,n.createElement)("div",{className:"atm-dropdown-field",ref:c},(0,n.createElement)("label",{className:"atm-dropdown-label"},e),(0,n.createElement)(l.DropdownMenu,{className:"atm-custom-dropdown",icon:d,text:t,controls:a.map(e=>({title:e.label,onClick:()=>o(e)})),disabled:i,popoverProps:{className:"atm-popover",style:{"--atm-dropdown-width":c.current?.offsetWidth?`${c.current.offsetWidth}px`:"auto"}}}),s&&(0,n.createElement)("p",{className:"atm-dropdown-help"},s))},g=function(){const e=`${atm_studio_data.plugin_url}assets/images/spin.svg`;return(0,r.createElement)("img",{src:e,className:"atm-custom-spinner",alt:"Loading...",style:{width:"20px",height:"20px"}})},h=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),v=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[v,w]=(0,r.useState)("default_seo"),[E,b]=(0,r.useState)("Standard / SEO-Optimized"),[f,y]=(0,r.useState)(""),[k,_]=(0,r.useState)("Use Default Model"),[S,C]=(0,r.useState)(3),[N,x]=(0,r.useState)(800),[T,A]=(0,r.useState)(""),[M,P]=(0,r.useState)(!1),[L,j]=(0,r.useState)(!0),[B,I]=(0,r.useState)(!0),{savePost:G}=(0,i.useDispatch)("core/editor"),z=(0,i.useSelect)(e=>e("core/editor").isSavingPost()),F=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))],H=Object.entries(atm_studio_data.writing_styles).map(([e,{label:t}])=>({label:t,value:e}));return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-form-section"},(0,n.createElement)("h4",{className:"atm-section-title"},"Content Configuration"),(0,n.createElement)(l.TextControl,{label:"Keyword",placeholder:"e.g., The future of renewable energy",value:c,onChange:d,disabled:t||z,help:"The main topic for your multipage article."}),(0,n.createElement)(l.TextControl,{label:"Article Title (Optional)",placeholder:"Leave empty to auto-generate a title",value:m,onChange:u,disabled:t||z,help:"Provide a specific title, or let AI create one from your keyword."}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(p,{label:"AI Model",text:k,options:F,onChange:e=>{y(e.value),_(e.label)},disabled:t||z}),(0,n.createElement)(p,{label:"Writing Style",text:E,options:H,onChange:e=>{w(e.value),b(e.label)},disabled:t||z}))),(0,n.createElement)("div",{className:"atm-form-section"},(0,n.createElement)("h4",{className:"atm-section-title"},"Multipage Structure"),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.RangeControl,{label:`Number of Pages: ${S}`,value:S,onChange:C,min:2,max:10,disabled:t||z}),(0,n.createElement)(l.RangeControl,{label:`Words per Page: ~${N}`,value:N,onChange:x,min:100,max:1500,step:50,disabled:t||z}))),(0,n.createElement)("div",{className:"atm-form-section"},(0,n.createElement)("h4",{className:"atm-section-title"},"Advanced Options"),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.ToggleControl,{label:"Enable Web Search",checked:L,onChange:j,disabled:t||z,help:"Use real-time data for accuracy."}),(0,n.createElement)(l.ToggleControl,{label:"Include Subheadlines",checked:B,onChange:I,disabled:t||z,help:"Add H2/H3 tags for structure."})),(0,n.createElement)(l.TextareaControl,{label:"Custom Prompt (Optional)",placeholder:"Add specific instructions here...",value:T,onChange:A,rows:4,disabled:t||z}),(0,n.createElement)(l.CheckboxControl,{label:"Also generate a featured image for the main article",checked:M,onChange:P,disabled:t||z})),(0,n.createElement)("div",{className:"atm-form-actions"},(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{a(!0),s("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");if(!m&&!c)return alert("Please provide a keyword or an article title."),void a(!1);try{let t=m;if(!t&&c){s("Generating compelling title...");const e=await h("generate_multipage_title",{keyword:c,model:f,page_count:S});if(!e.success)throw new Error(e.data);t=e.data.article_title,u(t)}s("Planning article structure...");const a=await h("generate_multipage_outline",{article_title:t,page_count:S,model:f,writing_style:v,include_subheadlines:B,enable_web_search:L});if(!a.success)throw new Error(a.data);const n=a.data.outline,r=[];for(let e=0;e<S;e++){s(`Writing page ${e+1} of ${S}...`);const a=await h("generate_multipage_content",{article_title:t,page_number:e+1,total_pages:S,page_outline:n.pages[e],words_per_page:N,model:f,writing_style:v,custom_prompt:T,enable_web_search:L,include_subheadlines:B});if(!a.success)throw new Error(a.data);r.push({title:n.pages[e].title,content:a.data.page_content})}s("Saving content and inserting shortcode...");const l=await h("create_multipage_article",{post_id:e,main_title:t,pages:r});if(!l.success)throw new Error(l.data);if(((e,t)=>{if(wp.data.select("core/block-editor")){wp.data.dispatch("core/editor").editPost({title:e});const a=wp.blocks.parse(t);wp.data.dispatch("core/block-editor").resetBlocks(a)}else jQuery("#title").val(e).trigger("blur"),window.tinymce?.get("content")?window.tinymce.get("content").setContent(t):jQuery("#content").val(t)})(t,l.data.editor_content),s("✅ Multipage article created successfully!"),M){s("✅ Article created! Saving post to generate image..."),await G(),s("Generating featured image...");const a=await h("generate_featured_image",{post_id:e,prompt:t});if(!a.success)throw new Error("Article created, but image failed: "+a.data);s("✅ All done! Featured image has been set.")}}catch(e){console.error("Generation error:",e),s(`⌁ Generation failed: ${e.message}`)}finally{a(!1)}},disabled:t||z||!c&&!m},t||z?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate Multipage Article")),o&&(0,n.createElement)("p",{className:"atm-status-message "+(o.includes("✅")?"success":o.includes("⌁")?"error":"info")},o)))},w=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),E=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[p,g]=(0,r.useState)(10),[h,v]=(0,r.useState)(""),[E,b]=(0,r.useState)("Technology"),[f,y]=(0,r.useState)(!1),[k,_]=(0,r.useState)(!0),[S,C]=(0,r.useState)(""),[N,x]=(0,r.useState)("Use Default Model"),[T,A]=(0,r.useState)(""),[M,P]=(0,r.useState)(!1),{savePost:L}=(0,i.useDispatch)("core/editor"),j=(0,i.useSelect)(e=>e("core/editor").isSavingPost()),B=({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(c.current){const e=c.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}},[t]),(0,n.createElement)("div",{className:"atm-dropdown-field",ref:c},(0,n.createElement)("label",{className:"atm-dropdown-label"},e),(0,n.createElement)(l.DropdownMenu,{className:"atm-custom-dropdown",icon:d,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",onMount:()=>{if(c.current){const e=c.current.offsetWidth;document.documentElement.style.setProperty("--atm-dropdown-width",e+"px")}}}}),s&&(0,n.createElement)("p",{className:"atm-dropdown-help"},s))},I=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.article_models).map(([e,t])=>({label:t,value:e}))];return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.TextControl,{label:"Topic or Theme",placeholder:"e.g., best productivity apps, top marketing tools",value:s,onChange:c,disabled:e||j,help:"The main topic for your listicle (what you want to list)"}),(0,n.createElement)(l.TextControl,{label:"Custom Title (Optional)",placeholder:"Leave empty to auto-generate",value:m,onChange:u,disabled:e||j,help:"Provide a specific title or let AI generate one from your topic"}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)("div",null,(0,n.createElement)(l.RangeControl,{label:`Number of Items: ${p}`,value:p,onChange:g,min:5,max:25,disabled:e||j,help:"How many items to include in your list"})),(0,n.createElement)(B,{label:"Category",text:E,options:[{label:"Technology",value:"technology"},{label:"Business",value:"business"},{label:"Health & Fitness",value:"health"},{label:"Travel",value:"travel"},{label:"Food & Cooking",value:"food"},{label:"Fashion & Beauty",value:"fashion"},{label:"Home & Garden",value:"home"},{label:"Entertainment",value:"entertainment"},{label:"Education",value:"education"},{label:"Finance",value:"finance"},{label:"Lifestyle",value:"lifestyle"},{label:"Sports",value:"sports"}],onChange:e=>{v(e.value),b(e.label)},disabled:e||j,helpText:"Category helps generate more relevant content"})),(0,n.createElement)(B,{label:"AI Model",text:N,options:I,onChange:e=>{C(e.value),x(e.label)},disabled:e||j}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.CheckboxControl,{label:"Include pricing information",checked:f,onChange:y,disabled:e||j,help:"Add price details when relevant"}),(0,n.createElement)(l.CheckboxControl,{label:"Include ratings/scores",checked:k,onChange:_,disabled:e||j,help:"Add star ratings or numerical scores"})),(0,n.createElement)(l.TextareaControl,{label:"Custom Instructions (Optional)",placeholder:"Add specific requirements, tone, or focus areas...",value:T,onChange:A,rows:4,disabled:e||j,help:"Additional instructions to customize the listicle content"}),(0,n.createElement)(l.CheckboxControl,{label:"Also generate a featured image",checked:M,onChange:P,disabled:e||j}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{t(!0),o("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id"),a=m||s;if(!a)return alert("Please provide a topic or article title."),void t(!1);try{let t=m;if(!t&&s){o("Generating compelling listicle title...");const e=await w("generate_listicle_title",{topic:s,item_count:p,category:h,model:S});if(!e.success)throw new Error(e.data);t=e.data.article_title}o("Creating listicle content...");const n=await w("generate_listicle_content",{post_id:e,article_title:t,topic:a,item_count:p,category:h,include_pricing:f,include_ratings:k,model:S,custom_prompt:T});if(!n.success)throw new Error(n.data);if(((e,t,a)=>{if(document.body.classList.contains("block-editor-page")){wp.data.dispatch("core/editor").editPost({title:e});const a=wp.blocks.parse(t),n=wp.data.select("core/block-editor").getBlocks();if(n.length>0&&(1!==n.length||"core/paragraph"!==n[0].name||""!==n[0].attributes.content)){const e=n.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(a)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(t):jQuery("#content").val(t);a&&a.trim()&&setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0&&(e.val(a),e.trigger("input").trigger("change").trigger("keyup"))},1e3)})(t,n.data.article_content,n.data.subtitle||""),o("✅ Listicle article created successfully!"),n.data.subtitle&&(o("✅ Article inserted! Saving post to apply subtitle..."),await L(),o("✅ Listicle article and subtitle saved!")),M){o("Saving post..."),await L(),o("Generating featured image...");const a=await w("generate_featured_image",{post_id:e,prompt:`A modern, clean illustration representing: ${t}`});a.success?o("✅ All done! Featured image generated."):(alert("Article was generated and saved, but the image failed: "+a.data),o("✅ Listicle generated! (Image generation failed)"))}}catch(e){console.error("Generation error:",e),alert("Error: "+e.message),o("⚠ Generation failed. Please try again.")}finally{t(!1)}},disabled:e||j||!s&&!m},e||j?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Generating..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7h.01M9 12h.01m0 4h.01m3-6h4m-4 4h4m2-5h.01M21 12h.01",fill:"currentColor"})),"Generate Listicle Article")),a&&(0,n.createElement)("p",{className:"atm-status-message "+(a.includes("✅")?"success":a.includes("⚠")?"error":"info")},a))},b=function({setActiveView:e}){const[t,a]=(0,r.useState)("creative"),l=[{id:"creative",title:"Standard Articles",description:"Create high-quality SEO content with AI",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),gradient:"from-blue-500 to-purple-600"},{id:"listicle",title:"Listicle Articles",description:"Create numbered lists and top 10 style content",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7h.01M9 12h.01m0 4h.01m3-6h4m-4 4h4m2-5h.01M21 12h.01"})),gradient:"from-green-500 to-emerald-600"},{id:"multipage",title:"Multipage Articles",description:"Create comprehensive, multi-part guides",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 002-2V7a2 2 0 00-2-2H9a2 2 0 00-2 2v12a2 2 0 002 2h10z"})),gradient:"from-yellow-500 to-amber-600"}];return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-type-selector"},(0,n.createElement)("div",{className:"atm-type-cards"},l.map(e=>(0,n.createElement)("div",{key:e.id,className:"atm-type-card "+(t===e.id?"active":""),onClick:()=>a(e.id)},(0,n.createElement)("div",{className:`atm-type-icon bg-gradient-to-r ${e.gradient}`},e.icon),(0,n.createElement)("div",{className:"atm-type-content"},(0,n.createElement)("h3",null,e.title),(0,n.createElement)("p",null,e.description)))))),(0,n.createElement)("div",{className:"atm-tab-content"},"creative"===t&&(0,n.createElement)(u,null),"listicle"===t&&(0,n.createElement)(E,null),"multipage"===t&&(0,n.createElement)(v,null)))},f=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,v]=(0,r.useState)("Use Default"),[w,E]=(0,r.useState)(""),[b,f]=(0,r.useState)("Use Default"),[y,k]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),{editPost:C}=((0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,i.useDispatch)("core/editor")),{image_provider:N}=atm_studio_data,x=y||N,T=({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const c=(0,r.useRef)(null);return(0,n.createElement)("div",{className:"atm-dropdown-field",ref:c},(0,n.createElement)("label",{className:"atm-dropdown-label"},e),(0,n.createElement)(l.DropdownMenu,{className:"atm-custom-dropdown",icon:d,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",style:{"--atm-dropdown-width":c.current?.offsetWidth?c.current.offsetWidth+"px":"auto"}}}),s&&(0,n.createElement)("p",{className:"atm-dropdown-help"},s))},A=[{label:`Use Default (${N})`,value:""},{label:"OpenAI (DALL-E 3)",value:"openai"},{label:"Google (Imagen 4)",value:"google"},{label:"BlockFlow (FLUX)",value:"blockflow"}];return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(T,{label:"Image Provider",text:_||`Use Default (${N})`,options:A,onChange:e=>{k(e.value),S(e.label)},disabled:t}),(0,n.createElement)(l.TextareaControl,{label:"Image Prompt",help:"A descriptive prompt is required for image generation.",value:c,onChange:m,placeholder:"A cinematic, photorealistic image of...",rows:"5",disabled:t}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(T,{label:"Image Size (Override)",text:h,options:[{label:"Use Default",value:""},{label:"16:9 Landscape",value:"1792x1024"},{label:"1:1 Square",value:"1024x1024"},{label:"9:16 Portrait",value:"1024x1792"}],onChange:e=>{p(e.value),v(e.label)},disabled:t}),(0,n.createElement)(T,{label:"Quality (Override)",text:b,options:[{label:"Use Default",value:""},{label:"Standard",value:"standard"},{label:"HD",value:"hd"}],onChange:e=>{E(e.value),f(e.label)},disabled:t,helpText:"openai"!==x?"Note: Quality setting is only for OpenAI/DALL-E 3.":""})),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(!c.trim())return void alert("Please enter a prompt for the image.");a(!0),s("");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const a=await(t={post_id:e,prompt:c,size:u,quality:w,provider:x},jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"generate_featured_image",nonce:atm_studio_data.nonce,...t}}));if(!a.success)throw new Error(a.data);{s("✅ Image generated and set!");const{attachment_id:e,html:t}=a.data;document.body.classList.contains("block-editor-page")?C({featured_media:e}):jQuery("#postimagediv .inside").html(t)}}catch(e){const t=e.message||"An unknown error occurred.";s(`Error: ${t}`)}finally{a(!1),setTimeout(()=>s(""),5e3)}var t},disabled:t},t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null),"Processing..."):"Generate & Set Featured Image"),o&&(0,n.createElement)("p",{className:"atm-status-message"},o)))};function y({podcastUrl:e,onRegenerate:t,postId:a}){const[o,s]=(0,r.useState)(!1),{editPost:c}=(0,i.useDispatch)("core/editor"),{podcastScript:d,podcastVoice:m,podcastProvider:u}=(0,i.useSelect)(e=>({podcastScript:e("core/editor").getEditedPostAttribute("meta")?._atm_podcast_script,podcastVoice:e("core/editor").getEditedPostAttribute("meta")?._atm_podcast_voice,podcastProvider:e("core/editor").getEditedPostAttribute("meta")?._atm_podcast_provider}),[]);return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("h4",null,"Your Podcast is Ready"),(0,n.createElement)("p",{className:"components-base-control__help"},"A player has been automatically embedded at the top of your post."),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.Button,{isSecondary:!0,onClick:()=>{const e=wp.media({title:"Select Podcast Cover Image",button:{text:"Use This Image"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"upload_podcast_image",nonce:atm_studio_data.nonce,post_id:a,image_id:t.id}}).done(()=>{c({meta:{_atm_podcast_image_id:t.id}}),window.location.reload()})}),e.open()}},"Change Cover Image"),(0,n.createElement)(l.Button,{isDestructive:!0,onClick:async()=>{s(!0),await t(d,m,u),s(!1)},disabled:o},o?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Regenerating..."):"Regenerate Audio")))}function k({handleGenerateScript:e,handleGenerateAudio:t,statusMessage:a,isLoading:o}){const[i,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(0),[h,v]=(0,r.useState)(""),[w,E]=(0,r.useState)(null),[b,f]=(0,r.useState)("English"),[y,k]=(0,r.useState)("English"),[_,S]=(0,r.useState)("medium"),[C,N]=(0,r.useState)("Medium (8-12 minutes)"),[x,T]=(0,r.useState)("alloy"),[A,M]=(0,r.useState)("Alloy"),[P,L]=(0,r.useState)("nova"),[j,B]=(0,r.useState)("Nova"),[I,G]=(0,r.useState)(atm_studio_data?.audio_provider||"openai"),[z,F]=(0,r.useState)("elevenlabs"===atm_studio_data?.audio_provider?"ElevenLabs":"OpenAI TTS"),[H,R]=(0,r.useState)(0),[$,O]=(0,r.useState)(""),[V,D]=(0,r.useState)(0),[W,Q]=(0,r.useState)(0),U=atm_studio_data?.tts_voices?Object.entries(atm_studio_data.tts_voices).map(([e,t])=>({label:t,value:e})):[{label:"Alloy",value:"alloy"},{label:"Nova",value:"nova"}],q=atm_studio_data?.elevenlabs_voices?Object.entries(atm_studio_data.elevenlabs_voices).map(([e,t])=>({label:t,value:e})):[],K="elevenlabs"===I?q:U;(0,r.useEffect)(()=>{if(K.length>0){const e=K.find(e=>e.value===x);e?M(e.label):(T(K[0].value),M(K[0].label));const t=K.find(e=>e.value===P);if(t)B(t.label);else{const e=K.find(e=>e.value!==x)||K[0];L(e.value),B(e.label)}}},[I,K]);const Z=async(e,t)=>{let a=0;const n=async()=>{try{a++;const r=await jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"check_script_progress",nonce:atm_studio_data.nonce,job_id:e}});if(!r.success)throw new Error(r.data);const l=r.data;if(u(l.progress),v(l.current_segment||""),"completed"===l.status)return t(l.script),d(!1),u(100),void v("Complete!");if("failed"===l.status)throw new Error(l.error_message||"Script generation failed");if(a>=200)throw new Error("Script generation timed out. Please try again.");setTimeout(n,3e3)}catch(e){alert(`Error: ${e.message}`),d(!1),u(0),v("")}};setTimeout(n,3e3)},Y=(e=!0)=>{const t=e?m:H,a=e?h:$;if(!(e?c:o))return null;const r=e?{intro_and_context:"Introduction & Context",main_discussion_part1:"Main Discussion (Part 1)",main_discussion_part2:"Main Discussion (Part 2)",conclusion_and_outro:"Conclusion & Outro"}:{processing:"Processing Audio",generating:"Generating Segments",combining:"Combining Audio"},l=e?"Generating Script...":"Generating Podcast...",i=e?"#10b981":"#8b5cf6";return(0,n.createElement)("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"}},(0,n.createElement)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",gap:"12px"}},(0,n.createElement)(g,null),(0,n.createElement)("span",{style:{fontWeight:"600"}},l," ",t,"%")),(0,n.createElement)("div",{style:{width:"100%",height:"8px",backgroundColor:"#e2e8f0",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"}},(0,n.createElement)("div",{style:{width:`${t}%`,height:"100%",backgroundColor:i,transition:"width 0.3s ease",borderRadius:"4px"}})),a&&(0,n.createElement)("div",{style:{fontSize:"14px",color:"#6b7280",fontStyle:"italic"}},e?`Current: ${r[a]||a}`:`Progress: ${W}/${V} segments complete`))};return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("h4",null,"Two-Person Podcast Configuration"),(0,n.createElement)("p",{className:"components-base-control__help"},"Generate a professional conversational podcast with two hosts discussing your article content with research-enhanced insights."),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(p,{label:"Script Language",text:y,options:[{label:"English",value:"English"},{label:"Spanish",value:"Spanish"},{label:"French",value:"French"},{label:"German",value:"German"},{label:"Chinese (Simplified)",value:"Chinese"},{label:"Japanese",value:"Japanese"},{label:"Russian",value:"Russian"},{label:"Portuguese",value:"Portuguese"},{label:"Italian",value:"Italian"},{label:"Arabic",value:"Arabic"},{label:"Hindi",value:"Hindi"},{label:"Korean",value:"Korean"},{label:"Dutch",value:"Dutch"},{label:"Turkish",value:"Turkish"},{label:"Polish",value:"Polish"}],onChange:e=>{f(e.value),k(e.label)},disabled:o||c}),(0,n.createElement)(p,{label:"Podcast Duration",text:C,options:[{label:"Short (5-7 minutes)",value:"short"},{label:"Medium (8-12 minutes)",value:"medium"},{label:"Long (25-40 minutes)",value:"long"}],onChange:e=>{S(e.value),N(e.label)},disabled:o||c,helpText:"Target length for the podcast episode"})),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:()=>e(b,_,s,d,u,v,E,Z),disabled:o||c},c?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating Advanced Script..."):"Step 1: Generate Two-Person Script with Research"),Y(!0),(0,n.createElement)(l.TextareaControl,{label:"Podcast Script",help:"long"===_?"Long scripts are generated in the background and may take several minutes. The script will appear here when complete.":"The generated two-person conversational script will appear here featuring Alex Chen (analytical host) and Jordan Rivera (enthusiastic co-host). You can edit it before generating the audio.",value:i,onChange:s,rows:"25",disabled:o||c,className:"atm-podcast-script-textarea"}),(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("h4",null,"Voice Configuration"),(0,n.createElement)(p,{label:"Audio Provider",text:z,options:[{label:"OpenAI TTS",value:"openai"},{label:"ElevenLabs",value:"elevenlabs"}],onChange:e=>{G(e.value),F(e.label)},disabled:o||0===q.length,helpText:0===q.length?"Enter ElevenLabs API key in settings to enable higher quality voices.":"ElevenLabs provides more natural-sounding voices for professional podcasts."}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(p,{label:"Host A Voice (Primary)",text:A,options:K,onChange:e=>{T(e.value),M(e.label)},disabled:o||!K.length,helpText:"The main host voice - typically leads the discussion"}),(0,n.createElement)(p,{label:"Host B Voice (Co-host)",text:j,options:K,onChange:e=>{L(e.value),B(e.label)},disabled:o||!K.length,helpText:"The co-host voice - provides reactions and questions"})),x===P&&K.length>1&&(0,n.createElement)("p",{style:{color:"#d97706",fontSize:"0.9rem",fontStyle:"italic"}},"Warning: Both hosts are using the same voice. Consider selecting different voices for better distinction.")),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:()=>t(i,x,P,I,R,O,D,Q),disabled:o||c||!i.trim()||!x||!P},o?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating Two-Person Audio..."):"Step 2: Generate Professional Podcast Audio"),Y(!1))}const _=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)(""),{postId:s,existingPodcastUrl:c}=(0,i.useSelect)(e=>({postId:e("core/editor").getCurrentPostId(),existingPodcastUrl:e("core/editor").getEditedPostAttribute("meta")?._atm_podcast_url}),[]),d=async(e,t,n,r,l,i,c,d)=>{if(!e.trim())return void alert("Script cannot be empty.");const u=e.includes("HOST_A:")&&e.includes("HOST_B:"),p=e.includes("ALEX:")&&e.includes("JORDAN:"),g=e.includes("**ALEX")&&e.includes("**JORDAN");if(u||p||g){a(!0),o("Starting podcast generation..."),l(0),i("");try{const a=await jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"generate_podcast",nonce:atm_studio_data.nonce,post_id:s,script:e,host_a_voice:t,host_b_voice:n,provider:r}});if(!a.success)throw new Error(a.data);const i=a.data.job_id;o("Podcast generation in progress. Please wait..."),await m(i,l,c,d)}catch(e){o(`Error: ${e.message}`),a(!1),l(0)}}else alert("The script doesn't appear to be in a valid dialogue format. Please regenerate the script first.")},m=async(e,t,n,r)=>{let l=0;const i=async()=>{try{l++;const a=await jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"check_podcast_progress",nonce:atm_studio_data.nonce,job_id:e}});if(!a.success)throw new Error(a.data);const s=a.data;if(t(s.progress_percentage),n(s.total_segments),r(s.completed_segments),"completed"===s.status)return o("Podcast generation completed! Reloading page..."),void setTimeout(()=>window.location.reload(),2e3);if("failed"===s.status)throw new Error(s.error_message||"Generation failed");if(l>=120)throw new Error("Generation timed out. Please try again.");setTimeout(i,5e3)}catch(e){o(`Error: ${e.message}`),a(!1),t(0)}};setTimeout(i,5e3)};return(0,n.createElement)("div",{className:"atm-generator-view"},c?(0,n.createElement)(y,{podcastUrl:c,onRegenerate:d,postId:s}):(0,n.createElement)(k,{handleGenerateScript:async(e,t,n,r,l,i,c,d)=>{const m=wp.data?.select("core/editor")?.getEditedPostContent();if(m&&m.trim()){a(!0),r(!0),l(0),i(""),o("Analyzing article content and researching additional information...");try{const a=await jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"generate_podcast_script",nonce:atm_studio_data.nonce,content:m,post_id:s,language:e,duration:t}});if(!a.success)throw new Error(a.data);a.data.job_id?(c(a.data.job_id),o("Long script generation started in background..."),await d(a.data.job_id,n)):(n(a.data.script),o("Script generated successfully! Review the two-person conversation below, then generate audio."),r(!1))}catch(e){o(`Error generating script: ${e.message}`),r(!1),l(0),i("")}finally{a(!1)}}else alert("Please write some content in the editor before generating a script.")},handleGenerateAudio:d,statusMessage:l,isLoading:t}),l&&(0,n.createElement)("p",{className:"atm-status-message"},l))},S=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),C=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[v,w]=(0,r.useState)("Use Default Model"),[E,b]=(0,r.useState)("dark"),[f,y]=(0,r.useState)("Dark"),k=[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.content_models).map(([e,t])=>({label:t,value:e}))];return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(p,{label:"AI Model",text:v,options:k,onChange:e=>{h(e.value),w(e.label)},disabled:t||o}),(0,n.createElement)(p,{label:"Theme",text:f,options:[{label:"Dark",value:"dark"},{label:"Light",value:"light"}],onChange:e=>{b(e.value),y(e.label)},disabled:t||o})),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{const e=wp.data.select("core/editor").getEditedPostContent();if(e.trim()){a(!0),c("Generating takeaways from post content..."),m("");try{const t=await S("generate_key_takeaways",{content:e,model:u});if(!t.success)throw new Error(t.data);m(t.data.takeaways),c("✅ Takeaways generated successfully. You can edit them below.")}catch(e){c(`Error: ${e.message||"An unknown error occurred."}`)}finally{a(!1)}}else alert("Editor content is empty. Please write something first.")},disabled:t||o},t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate Takeaways from Post Content"),(0,n.createElement)(l.TextareaControl,{label:"Key Takeaways",help:"One takeaway per line. Edit as needed before saving.",value:d,onChange:m,rows:8,disabled:t||o}),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:async()=>{if(!d.trim())return void alert("There are no takeaways to save.");i(!0),c("Saving takeaways...");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const t=await S("save_key_takeaways",{post_id:e,takeaways:d,theme:E});if(!t.success)throw new Error(t.data);c("✅ Takeaways saved!")}catch(e){c(`Error: ${e.message||"An unknown error occurred."}`)}finally{i(!1)}},disabled:t||o||!d},o?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Saving..."):"Save Takeaways"),s&&(0,n.createElement)("p",{className:"atm-status-message"},s)))},N=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)("Click the button to start recording."),m=(0,r.useRef)(null),u=(0,r.useRef)([]),{insertBlocks:p}=(0,i.useDispatch)("core/block-editor");return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-speech-container"},(0,n.createElement)("div",{className:"atm-recording-section"},(0,n.createElement)("div",{className:"atm-record-button-wrapper "+(t?"is-recording":"")},(0,n.createElement)("div",{className:"atm-pulse-ring atm-pulse-ring-1"}),(0,n.createElement)("div",{className:"atm-pulse-ring atm-pulse-ring-2"}),(0,n.createElement)("div",{className:"atm-pulse-ring atm-pulse-ring-3"}),(0,n.createElement)("button",{className:`atm-record-button ${t?"is-recording":""} ${o?"is-transcribing":""}`,onClick:t?()=>{m.current&&"recording"===m.current.state&&(m.current.stop(),m.current.stream.getTracks().forEach(e=>e.stop()))}:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});m.current=new MediaRecorder(e),u.current=[],m.current.ondataavailable=e=>{e.data.size>0&&u.current.push(e.data)},m.current.onstop=()=>{a(!1),d("Recording stopped. Preparing for transcription..."),(async()=>{if(0===u.current.length)return void d("No audio recorded. Click to start again.");s(!0),d("Transcribing audio... Please wait.");const e=new Blob(u.current,{type:"audio/webm"}),t=new FormData;t.append("action","transcribe_audio"),t.append("nonce",atm_studio_data.nonce),t.append("audio_file",e,"recording.webm");try{const e=await fetch(atm_studio_data.ajax_url,{method:"POST",body:t}),a=await e.json();if(!a.success)throw new Error(a.data||"Transcription failed on the server.");{const e=a.data.transcript;if(e.trim()){const t=wp.blocks.createBlock("core/paragraph",{content:e.trim()});p(t),d("✅ Transcription complete and inserted!")}else d("Transcription returned empty. Please try again.")}}catch(e){console.error("Transcription error:",e),d(`Error: ${e.message}`)}finally{s(!1),u.current=[],setTimeout(()=>d("Click the button to start a new recording."),5e3)}})()},m.current.start(),a(!0),d("Recording... Click to stop.")}catch(e){d("Error: Could not access microphone. Please grant permission."),console.error("Microphone access error:",e)}},disabled:o},o?(0,n.createElement)(l.Spinner,null):t?(0,n.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},(0,n.createElement)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})):(0,n.createElement)("img",{src:`${atm_studio_data.plugin_url}/includes/images/mic.svg`,alt:"Microphone",className:"atm-mic-icon"}))),(0,n.createElement)("p",{className:"atm-recording-status"},c)),(0,n.createElement)("div",{className:"atm-instructions"},(0,n.createElement)("p",null,"Click the microphone to start recording your voice. The audio will be automatically transcribed and inserted into your post content."))))},x=window.wp.blocks;function T({onTranscriptionComplete:e,onTranscriptionError:t}){const[a,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),i=(0,r.useRef)(null),s=(0,r.useRef)([]);return{isRecording:a,isTranscribing:l,startRecording:async()=>{try{const a=await navigator.mediaDevices.getUserMedia({audio:!0});i.current=new MediaRecorder(a),s.current=[],i.current.ondataavailable=e=>{e.data.size>0&&s.current.push(e.data)},i.current.onstop=()=>{n(!1),(async()=>{if(0===s.current.length)return void t?.("No audio was recorded.");o(!0);const a=new Blob(s.current,{type:"audio/webm"}),n=new FormData;n.append("audio_file",a,"recording.webm");try{const t=await((e,t)=>(t.append("action","transcribe_audio"),t.append("nonce",atm_studio_data.nonce),fetch(atm_studio_data.ajax_url,{method:"POST",body:t}).then(e=>e.json())))(0,n);if(!t.success)throw new Error(t.data||"Transcription failed on the server.");e?.(t.data.transcript)}catch(e){t?.(e.message)}finally{o(!1),s.current=[]}})()},i.current.start(),n(!0)}catch(e){t?.("Could not access microphone. Please grant permission.")}},stopRecording:()=>{i.current&&"recording"===i.current.state&&(i.current.stop(),i.current.stream.getTracks().forEach(e=>e.stop()))}}}const A=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),M=function({setActiveView:e}){const[t,a]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[c,d]=(0,r.useState)("Spanish"),[m,u]=(0,r.useState)("Spanish"),[h,v]=(0,r.useState)(!1),[w,E]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[y,k]=(0,r.useState)("Spanish"),[_,S]=(0,r.useState)("Spanish"),[C,N]=(0,r.useState)(!1),{insertBlocks:M}=(0,i.useDispatch)("core/block-editor"),{savePost:P}=(0,i.useDispatch)("core/editor"),{isRecording:L,isTranscribing:j,startRecording:B,stopRecording:I}=T({onTranscriptionComplete:e=>{a(t=>t+(t?" ":"")+e),f("✅ Transcription complete."),setTimeout(()=>f(""),3e3)},onTranscriptionError:e=>{f(`Error: ${e}`)}}),G=[{label:"Spanish",value:"Spanish"},{label:"French",value:"French"},{label:"German",value:"German"},{label:"Chinese (Simplified)",value:"Chinese (Simplified)"},{label:"Japanese",value:"Japanese"},{label:"Russian",value:"Russian"},{label:"Portuguese",value:"Portuguese"},{label:"Italian",value:"Italian"},{label:"Arabic",value:"Arabic"},{label:"Hindi",value:"Hindi"},{label:"Korean",value:"Korean"},{label:"Dutch",value:"Dutch"},{label:"Turkish",value:"Turkish"},{label:"Polish",value:"Polish"},{label:"Swedish",value:"Swedish"}];(0,r.useEffect)(()=>{L?f("Recording..."):j&&f("Transcribing...")},[L,j]);const z=h||L||j||C;return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-translator-full-editor"},(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{N(!0),E("Reading editor content...");const{title:e,content:t}=(()=>{const e=wp.data.select("core/editor");return{title:e.getEditedPostAttribute("title"),content:e.getEditedPostContent()}})();if(!t.trim())return alert("Editor content is empty. Please write something to translate."),void N(!1);E(`Translating entire post to ${y}...`);try{const a=await A("translate_editor_content",{title:e,content:t,target_language:y});if(!a.success)throw new Error(a.data);{const{translated_title:e,translated_content:t}=a.data;((e,t)=>{const a=!!wp.data.select("core/block-editor"),n=window.marked?window.marked.parse(t):t;if(a){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(n);wp.data.dispatch("core/block-editor").resetBlocks(t)}else jQuery("#title").val(e).trigger("blur"),window.tinymce?.get("content")?window.tinymce.get("content").setContent(n):jQuery("#content").val(n)})(e,t),E("✅ Post translated! Saving..."),await P(),E("✅ Post translated and saved!")}}catch(e){E(`Error: ${e.message}`)}finally{N(!1)}},disabled:z},C?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Translating..."):"Translate Editor"),(0,n.createElement)("span",null,"to"),(0,n.createElement)(p,{label:"",text:_,options:G,onChange:e=>{k(e.value),S(e.label)},disabled:z})),(0,n.createElement)("hr",{className:"atm-form-divider"}),(0,n.createElement)("label",{className:"components-base-control__label"},"Text Snippet to Translate"),(0,n.createElement)("div",{className:"atm-translator-main-area"},(0,n.createElement)(l.TextareaControl,{value:t,onChange:a,placeholder:"Type your text here...",rows:8,disabled:z,className:"atm-translator-text-input"}),(0,n.createElement)("div",{className:"atm-translator-recorder"},(0,n.createElement)("h4",null,"Or Record to Translate"),(0,n.createElement)("div",{className:"atm-record-button-wrapper is-small "+(L?"is-recording":"")},(0,n.createElement)("div",{className:"atm-pulse-ring atm-pulse-ring-1"}),(0,n.createElement)("div",{className:"atm-pulse-ring atm-pulse-ring-2"}),(0,n.createElement)("button",{className:`atm-record-button ${L?"is-recording":""} ${j?"is-transcribing":""}`,onClick:L?I:B,disabled:z,"aria-label":L?"Stop Recording":"Start Recording"},j?(0,n.createElement)(g,null):L?(0,n.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},(0,n.createElement)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})):(0,n.createElement)("img",{src:`${atm_studio_data.plugin_url}/includes/images/mic.svg`,alt:"Microphone",className:"atm-mic-icon"}))),(L||j||b)&&(0,n.createElement)("p",{className:"atm-recording-status"},b))),(0,n.createElement)(p,{label:"Translate Snippet To",text:m,options:G,onChange:e=>{d(e.value),u(e.label)},disabled:z}),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:async()=>{if(!t.trim())return alert("Please enter text to translate.");v(!0),E(`Translating to ${c}...`),s("");try{const e=await A("translate_text",{source_text:t,target_language:c});if(!e.success)throw new Error(e.data);s(e.data.translated_text),E("✅ Translation successful!")}catch(e){E(`Error: ${e.message}`)}finally{v(!1)}},disabled:z||!t.trim()},h?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Translating..."):"Translate Snippet"),(0,n.createElement)(l.TextareaControl,{label:"Translated Snippet",value:o,readOnly:!0,rows:8}),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:()=>{o.trim()&&(M((0,x.createBlock)("core/paragraph",{content:o.trim()})),E("Text inserted into editor!"))},disabled:!o.trim()||z},"Insert Snippet into Editor"),w&&(0,n.createElement)("p",{className:"atm-status-message"},w)))},P=(0,r.forwardRef)(({icon:e,size:t=24,...a},n)=>(0,r.cloneElement)(e,{width:t,height:t,...a,ref:n})),L=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),j=function({onSearch:e,onFilterClick:t,disabled:a}){const[o,i]=(0,r.useState)("");return(0,n.createElement)("div",{className:"atm-autocomplete-container"},(0,n.createElement)("form",{className:"atm-autocomplete-form",onSubmit:t=>{t.preventDefault(),e(o)}},(0,n.createElement)(l.TextControl,{value:o,onChange:e=>i(e),placeholder:"Search for videos on YouTube...",disabled:a}),(0,n.createElement)(l.Button,{type:"submit",isPrimary:!0,disabled:a||!o,className:"atm-search-button"},(0,n.createElement)(P,{icon:L})),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:t,disabled:a,className:"atm-filter-button"},(0,n.createElement)("img",{src:`${atm_studio_data.plugin_url}includes/images/filter.svg`,alt:"Filter",className:"atm-button-icon"}))))},B=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})}),I=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),G=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),z=function({video:e,onEmbed:t}){const[a,o]=(0,r.useState)(!1);return(0,n.createElement)("div",{className:"atm-video-result-item"},(0,n.createElement)("div",{className:"atm-video-thumbnail"},(0,n.createElement)("img",{src:e.thumbnail,alt:e.title})),(0,n.createElement)("div",{className:"atm-video-details"},(0,n.createElement)("h4",{className:"atm-video-title"},e.title),(0,n.createElement)("p",{className:"atm-video-description"},e.description),(0,n.createElement)("div",{className:"atm-video-meta"},(0,n.createElement)("span",null,e.channel)," • ",(0,n.createElement)("span",null,e.date)),(0,n.createElement)("div",{className:"atm-video-actions"},(0,n.createElement)(l.Button,{icon:B,href:e.url,target:"_blank"},"Watch"),(0,n.createElement)(l.Button,{icon:I,onClick:()=>{navigator.clipboard.writeText(e.url),o(!0),setTimeout(()=>o(!1),2e3)}},a?"Copied!":"Copy Link"),(0,n.createElement)(l.Button,{icon:G,onClick:()=>t(e.url),className:"is-embed"},"Embed"))))},F=function({isOpen:e,onClose:t,filters:a,onFilterChange:r}){return e?(0,n.createElement)(l.Modal,{title:"Search Filters",onRequestClose:t,className:"atm-filter-modal"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.SelectControl,{label:"Sort By",value:a.order,options:[{label:"Relevance",value:"relevance"},{label:"Upload Date",value:"date"},{label:"View Count",value:"viewCount"},{label:"Rating",value:"rating"}],onChange:e=>r("order",e),disabled:!!a.publishedAfter}),(0,n.createElement)(l.SelectControl,{label:"Duration",value:a.videoDuration,options:[{label:"Any",value:"any"},{label:"Short (< 4 min)",value:"short"},{label:"Medium (4-20 min)",value:"medium"},{label:"Long (> 20 min)",value:"long"}],onChange:e=>r("videoDuration",e)}),(0,n.createElement)(l.SelectControl,{label:"Upload Date",value:a.publishedAfter,options:[{label:"Anytime",value:""},{label:"Last Hour",value:"hour"},{label:"Today",value:"day"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}],onChange:e=>r("publishedAfter",e)}))):null},H=function({setActiveView:e}){const[t,a]=(0,r.useState)([]),[o,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)("Enter a search term to find YouTube videos."),[m,u]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[h,v]=(0,r.useState)({order:"relevance",videoDuration:"any",publishedAfter:""}),{insertBlocks:w}=(0,i.useDispatch)("core/block-editor"),E=async e=>{if(e){u(e),s(!0),a([]),d(`Searching for "${e}"...`);try{const n=await(t={query:e,filters:h},jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:"search_youtube",nonce:atm_studio_data.nonce,...t}}));if(!n.success)throw new Error(n.data);a(n.data),d(n.data.length>0?`Showing results for "${e}"`:"No results found.")}catch(e){d(`Error: ${e.message}`)}finally{s(!1)}var t}};(0,r.useEffect)(()=>{m&&E(m)},[h]);const b=e=>{if(wp.data.select("core/block-editor")){const t=(0,x.createBlock)("core/embed",{url:e,providerNameSlug:"youtube",align:"wide",className:"atm-youtube-embed"});w(t)}else{const t=`\n<div class="wp-video" style="width: 100%;"><iframe src="${e.replace("/watch?v=","/embed/")}" width="500" height="281" style="width: 100%; aspect-ratio: 16/9; height: auto;" frameborder="0" allowfullscreen></iframe></div>\n`;window.send_to_editor(t)}d("✅ Video embedded successfully!")};return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-video-search-container"},(0,n.createElement)(j,{onSearch:E,onFilterClick:()=>g(!0),disabled:o}),(0,n.createElement)("p",{className:"components-base-control__help",style:{marginTop:"-1rem"}},"Search for videos on YouTube. Use filters for more specific results."),o&&(0,n.createElement)("div",{className:"atm-video-spinner-container"},(0,n.createElement)(l.Spinner,null)),!o&&t.length>0&&(0,n.createElement)("div",{className:"atm-video-results-list"},t.map(e=>(0,n.createElement)(z,{key:e.id,video:e,onEmbed:b}))),!o&&0===t.length&&(0,n.createElement)("p",{className:"atm-status-message"},c)),(0,n.createElement)(F,{isOpen:p,onClose:()=>g(!1),filters:h,onFilterChange:(e,t)=>{v(a=>{const n={...a,[e]:t};return"publishedAfter"===e&&""!==t&&(n.order="date"),"order"===e&&"relevance"===t&&(n.publishedAfter=""),n})}}))},R=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),$=function({setActiveView:e}){const[t,a]=(0,r.useState)(""),[o,i]=(0,r.useState)(null),[s,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)("Describe the chart you want to create."),u=(0,r.useRef)(null),[p,h]=(0,r.useState)(""),[v,w]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=null,t=null;return u.current&&o&&new Promise((e,t)=>{if(window.echarts)return e(window.echarts);const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js",a.onload=()=>e(window.echarts),a.onerror=t,document.head.appendChild(a)}).then(a=>{e=a.init(u.current,"light"),e.setOption(JSON.parse(o)),t=new ResizeObserver(()=>{e?.resize()}),t.observe(u.current)}).catch(e=>console.error("ECharts loading failed:",e)),()=>{t?.disconnect(),e?.dispose()}},[o]),(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.TextareaControl,{label:"Chart Description",help:"Describe the chart you want to create. Be specific about the type and data.",value:t,onChange:a,placeholder:"e.g., A bar chart showing monthly revenue for the last 6 months",rows:4,disabled:s}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(t.trim()){c(!0),m("Generating chart data and configuration..."),i(null);try{const e=await R("generate_chart_from_ai",{prompt:t});if(!e.success)throw new Error(e.data);i(e.data.chart_config),m("✅ Chart generated successfully!")}catch(e){m(`Error: ${e.message}`)}finally{c(!1)}}else alert("Please enter a description for your chart.")},disabled:s||!t.trim()},s?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate Chart"),d&&(0,n.createElement)("p",{className:"atm-status-message"},d),(0,n.createElement)("div",{className:"atm-chart-preview-container"},(0,n.createElement)("div",{ref:u,style:{width:"100%",height:"400px",display:o?"block":"none"}})),o&&(0,n.createElement)("div",{className:"atm-chart-actions"},(0,n.createElement)(l.TextControl,{label:"Chart Title (for your reference)",value:p,onChange:h,placeholder:"e.g., Q3 Sales Report",disabled:s}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(p.trim()){c(!0),m("Saving chart...");try{const e=await R("save_atm_chart",{title:p,chart_config:o,chart_id:v});if(!e.success)throw new Error(e.data);w(e.data.chart_id),m("✅ Chart saved successfully! Use the shortcode to embed it.")}catch(e){m(`Error: ${e.message}`)}finally{c(!1)}}else alert("Please provide a title for your chart before saving.")},disabled:s||!p.trim()},s?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," ",v?"Updating...":"Saving..."," "):v?"Update Chart":"Save Chart"),v&&(0,n.createElement)("div",{className:"atm-shortcode-display"},(0,n.createElement)("p",null,"Embed this chart anywhere with this shortcode:"),(0,n.createElement)(l.TextControl,{value:`[atm_chart id="${v}"]`,readOnly:!0,onClick:e=>e.target.select()})))))},O=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),V=()=>{const e=wp.data.select("core/editor");return{postId:e.getCurrentPostId(),title:e.getEditedPostAttribute("title")||"",content:e.getEditedPostContent()||""}},D=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)("Generate realistic, human-style comments from your post content."),[d,m]=(0,r.useState)(10),[u,h]=(0,r.useState)(!0),[v,w]=(0,r.useState)(!1),[E,b]=(0,r.useState)(""),[f,y]=(0,r.useState)("Use Default Model"),[k,_]=(0,r.useState)([]),S=(0,r.useMemo)(()=>[{label:"Use Default Model",value:""},...Object.entries(atm_studio_data.content_models).map(([e,t])=>({label:t,value:e}))],[]),C=(0,r.useMemo)(()=>{const e=k.map((e,t)=>({...e,index:t,children:[]})),t=[],a=Object.fromEntries(e.map(e=>[e.index,e]));return e.forEach(e=>{const n=Number.isInteger(e.parent_index)?e.parent_index:null;null===n||n<0||!(n in a)?t.push(e):a[n].children.push(e)}),t},[k]),N=({comment:e,depth:t=0})=>(0,n.createElement)("div",{className:"atm-form-container",style:{marginLeft:t?18*Math.min(t,4):0,borderLeft:t?"3px solid #e2e8f0":"1px solid #e2e8f0"}},(0,n.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6}},(0,n.createElement)("strong",{style:{color:"#1e293b"}},e.author_name||"Anonymous"),(0,n.createElement)("span",{style:{color:"#94a3b8",fontSize:12}},Number.isInteger(e.parent_index)?"Reply":"Top-level")),(0,n.createElement)("div",{style:{whiteSpace:"pre-wrap",color:"#334155"}},e.text||""),e.children?.length?(0,n.createElement)("div",{style:{marginTop:10}},e.children.map(e=>(0,n.createElement)(N,{key:e.index,comment:e,depth:t+1}))):null);return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(p,{label:"AI Model",text:f,options:S,onChange:e=>{b(e.value),y(e.label)},disabled:t||o}),(0,n.createElement)(l.RangeControl,{label:`Number of Comments: ${d}`,value:d,onChange:m,min:5,max:50,disabled:t||o})),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.ToggleControl,{label:"Include Threaded Replies",checked:u,onChange:h,disabled:t||o,help:"Allow some comments to reply to others for realism."}),(0,n.createElement)(l.ToggleControl,{label:"Approve Immediately",checked:v,onChange:w,disabled:t||o,help:"If off, comments are saved as Pending."})),(0,n.createElement)("div",{className:"atm-comments-actions"},(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{const{content:e,postId:t,title:n}=V();if(e.trim()){a(!0),_([]),c("Generating lifelike comments...");try{const a=await O("generate_post_comments",{post_id:t,title:n,content:e,count:d,threaded:u?"true":"false",model:E});if(!a.success)throw new Error(a.data||"Generation failed.");_(a.data.comments||[]),c("✅ Comments generated. Review and save to WordPress.")}catch(e){c(`Error: ${e.message}`)}finally{a(!1)}}else alert("Editor content is empty. Please write or paste content first.")},disabled:t||o},t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate Comments"),(0,n.createElement)(l.Button,{isSecondary:!0,onClick:async()=>{if(!k.length)return void alert("There are no comments to save.");const{postId:e}=V();i(!0),c("Saving comments to WordPress...");try{const t=await O("save_generated_comments",{post_id:e,approve:v?"true":"false",comments:JSON.stringify(k)});if(!t.success)throw new Error(t.data||"Save failed.");c(`✅ Saved ${t.data.inserted} comment(s).`)}catch(e){c(`Error: ${e.message}`)}finally{i(!1)}},disabled:o||t||0===k.length},o?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Saving..."):"Save to WordPress")),s&&(0,n.createElement)("p",{className:"atm-status-message"},s)),k.length>0&&(0,n.createElement)("div",{style:{marginTop:16}},C.map(e=>(0,n.createElement)(N,{key:e.index,comment:e}))))},W=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),Q=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!0),[h,v]=(0,r.useState)([]),{savePost:w}=(0,i.useDispatch)("core/editor"),E=((0,i.useSelect)(e=>e("core/editor").isSavingPost()),async(e="",a=!1)=>{t(!0),o(e?"Searching feeds...":"Fetching latest..."),v([]);const n=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const t=await W("fetch_rss_articles",{post_id:n,keyword:e,use_scraping:a});if(!t.success)throw new Error(t.data);v(t.data),o(t.data.length>0?`Found ${t.data.length} articles.`:"No articles found.")}catch(e){o(`Error: ${e.message}`)}finally{t(!1)}});return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.TextControl,{label:"Search by Keyword (Optional)",value:s,onChange:c,placeholder:"e.g., Trump, AI, Healthcare",disabled:e}),(0,n.createElement)(l.CheckboxControl,{label:"Deep Content Search",help:"Scrapes full article content for more accurate keyword matching (slower but more precise).",checked:d,onChange:m,disabled:e}),(0,n.createElement)(l.CheckboxControl,{label:"Use Full Article Content for Generation",help:"Scrapes the complete article for better AI rewriting (recommended).",checked:u,onChange:p,disabled:e}),(0,n.createElement)("div",{className:"atm-grid-2"},(0,n.createElement)(l.Button,{isSecondary:!0,onClick:()=>E(s,d),disabled:e||!s},e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Searching..."):"Search Feeds"),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:()=>E(),disabled:e},e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Fetching..."):"Fetch Latest Articles")),a&&(0,n.createElement)("p",{className:"atm-status-message"},a),h.length>0&&(0,n.createElement)("div",{className:"atm-video-results-list"},h.map((a,r)=>(0,n.createElement)("div",{key:a.guid,className:"atm-video-result-item"},(0,n.createElement)("div",{className:"atm-video-thumbnail"},a.image?(0,n.createElement)("img",{src:a.image,alt:a.title}):(0,n.createElement)("div",{className:"atm-rss-thumbnail-placeholder"},(0,n.createElement)("span",{className:"dashicons dashicons-rss"}))),(0,n.createElement)("div",{className:"atm-video-details"},(0,n.createElement)("h4",{className:"atm-video-title"},a.title),(0,n.createElement)("div",{className:"atm-video-meta"},(0,n.createElement)("span",null,a.source)," • ",(0,n.createElement)("span",null,a.date)),(0,n.createElement)("p",{className:"atm-video-description"},a.description.substring(0,150),"..."),(0,n.createElement)("div",{className:"atm-video-actions"},(0,n.createElement)(l.Button,{isSecondary:!0,icon:B,href:a.link,target:"_blank"},"Visit Website"),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:()=>(async(e,a)=>{o(`Generating from "${e.title}"...`),t(!0);const n=[...h];n[a].isGenerating=!0,v(n);const r=document.getElementById("atm-studio-root").getAttribute("data-post-id"),l=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timed out after 2 minutes")),12e4)),i=W("generate_article_from_rss",{post_id:r,article_url:e.link,article_guid:e.guid,rss_content:e.content,use_full_content:u});try{const t=await Promise.race([i,l]);if(!t.success)throw new Error(t.data);console.log("ATM Debug - Response data:",t.data),console.log("ATM Debug - Subtitle received:",t.data.subtitle),((e,t,a)=>{const n=document.body.classList.contains("block-editor-page"),r=window.marked?window.marked.parse(t):t;if(n){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(r),a=wp.data.select("core/block-editor").getBlocks();if(a.length>0&&(1!==a.length||"core/paragraph"!==a[0].name||""!==a[0].attributes.content)){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(r):jQuery("#content").val(r);a&&a.trim()&&(console.log("ATM: Attempting to populate subtitle:",a),setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0?(console.log("ATM: Found SmartMag subtitle field, populating..."),e.val(a),e.trigger("input").trigger("change").trigger("keyup"),console.log("ATM: Subtitle populated successfully")):console.log("ATM: SmartMag subtitle field not found")},1e3))})(t.data.article_title,t.data.article_content,t.data.subtitle||""),o(`✅ Article generated from "${e.title}"!`),v(h.filter((e,t)=>t!==a)),t.data.subtitle&&(o("✅ Article generated! Saving post to apply subtitle..."),await w(),o(`✅ Article and subtitle saved from "${e.title}"!`))}catch(e){console.error("RSS Generation Error:",e),o(`Error: ${e.message}`)}finally{t(!1);const e=[...h];e[a]&&(e[a].isGenerating=!1,v(e))}})(a,r),disabled:e||a.isGenerating,className:"is-embed"},a.isGenerating?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate Article")))))))},U=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),q=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[m,u]=(0,r.useState)("newsapi"),[p,h]=(0,r.useState)("NewsAPI.org"),[v,w]=(0,r.useState)(!1),[E,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)(""),{savePost:k}=(0,i.useDispatch)("core/editor"),_=(0,i.useSelect)(e=>e("core/editor").isSavingPost());return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)(l.TextControl,{label:"News Topic",value:s,onChange:c,placeholder:"e.g., recent AI developments",disabled:e||_}),(0,n.createElement)(({label:e,text:t,options:a,onChange:o,disabled:i,helpText:s})=>{const c=(0,r.useRef)(null);return(0,n.createElement)("div",{className:"atm-dropdown-field",ref:c},(0,n.createElement)("label",{className:"atm-dropdown-label"},e),(0,n.createElement)(l.DropdownMenu,{className:"atm-custom-dropdown",icon:d,text:t,controls:a.map(e=>({title:e.label,onClick:()=>{o(e)}})),disabled:i,popoverProps:{className:"atm-popover",style:{"--atm-dropdown-width":c.current?.offsetWidth?c.current.offsetWidth+"px":"auto"}}}),s&&(0,n.createElement)("p",{className:"atm-dropdown-help"},s))},{label:"News Source",text:p,options:[{label:"NewsAPI.org",value:"newsapi"},{label:"GNews.io",value:"gnews"},{label:"The Guardian",value:"guardian"}],onChange:e=>{u(e.value),h(e.label)},disabled:e||_}),(0,n.createElement)(l.CheckboxControl,{label:"Force fresh search (bypasses cache)",checked:v,onChange:w,disabled:e||_}),(0,n.createElement)(l.CheckboxControl,{label:"Also generate a featured image",checked:E,onChange:e=>{b(e),e&&y(`Create a highly photorealistic image that visually represents the following news topic: "${s}"\n\nGuidelines:\n- Style: photorealistic, ultra-realistic, natural lighting\n- Composition: clear, well-framed subject that directly illustrates the topic\n- Avoid: text, logos, watermarks, artistic/cartoon styles\n- Aspect ratio: 16:9 (suitable for a featured article image)\n- Quality: high-resolution, detailed textures, realistic colors`)},disabled:e||_}),E&&(0,n.createElement)(l.TextareaControl,{label:"Featured Image Prompt",help:"This prompt will be used to generate the image. You can edit it as needed.",value:f,onChange:y,rows:8,disabled:e||_}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(!s)return void alert("Please enter a topic for the news article.");t(!0),o("Searching for latest news...");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const a=await U("generate_news_article",{topic:s,news_source:m,force_fresh:v});if(!a.success)throw new Error(a.data);if(console.log("ATM Debug - Response data:",a.data),console.log("ATM Debug - Subtitle received:",a.data.subtitle),o("Writing article..."),((e,t,a)=>{const n=document.body.classList.contains("block-editor-page"),r=window.marked?window.marked.parse(t):t;if(n){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(r),a=wp.data.select("core/block-editor").getBlocks();if(a.length>0&&(1!==a.length||"core/paragraph"!==a[0].name||""!==a[0].attributes.content)){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(r):jQuery("#content").val(r);a&&a.trim()&&(console.log("ATM: Attempting to populate subtitle:",a),setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0?(console.log("ATM: Found SmartMag subtitle field, populating..."),e.val(a),e.trigger("input").trigger("change").trigger("keyup"),console.log("ATM: Subtitle populated successfully")):console.log("ATM: SmartMag subtitle field not found")},1e3))})(a.data.article_title,a.data.article_content,a.data.subtitle||""),o("✅ News article inserted!"),a.data.subtitle&&(o("✅ News article inserted! Saving post to apply subtitle..."),await k(),o("✅ News article and subtitle saved!")),E){o("Saving post..."),await k(),o("Generating featured image...");const t=await U("generate_featured_image",{post_id:e,prompt:f});if(t.success)return o("✅ All done! Reloading to show image..."),void setTimeout(()=>window.location.reload(),1500);alert("Article was generated and saved, but the image failed: "+t.data)}t(!1),setTimeout(()=>o(""),3e3)}catch(e){o(`Error: ${e.message}`),t(!1)}},disabled:e||_||!s},e||_?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null)," Generating..."):"Generate News Article"),a&&(0,n.createElement)("p",{className:"atm-status-message"},a))},K=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),Z=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[s,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),[h,v]=(0,r.useState)(!1),[w,E]=(0,r.useState)([]),[b,f]=(0,r.useState)(null),{savePost:y}=(0,i.useDispatch)("core/editor"),k=(0,i.useSelect)(e=>e("core/editor").isSavingPost()),_=({article:e,index:t})=>(0,n.createElement)("div",{className:"atm-live-news-item"},e.thumbnail&&(0,n.createElement)("div",{className:"atm-news-thumbnail"},(0,n.createElement)("img",{src:e.thumbnail,alt:e.title})),(0,n.createElement)("div",{className:"atm-news-content"},(0,n.createElement)("h4",{className:"atm-news-title"},e.title),(0,n.createElement)("div",{className:"atm-news-meta"},(0,n.createElement)("span",{className:"atm-news-source"},e.source),(0,n.createElement)("span",{className:"atm-news-date"},e.date)),e.summary&&(0,n.createElement)("p",{className:"atm-news-summary"},e.summary))),S=({category:a,categoryIndex:r})=>(0,n.createElement)("div",{className:"atm-news-category-block"},(0,n.createElement)("div",{className:"atm-category-header"},(0,n.createElement)("h3",{className:"atm-category-title"},a.title),(0,n.createElement)("span",{className:"atm-article-count"},a.articles?.length||0," articles")),(0,n.createElement)("div",{className:"atm-news-grid"},a.articles?.map((e,t)=>(0,n.createElement)(_,{key:t,article:e,index:t}))),(0,n.createElement)("div",{className:"atm-category-actions"},(0,n.createElement)(l.Button,{isPrimary:!0,onClick:()=>(async(e,a)=>{f(a),t(!0),c("Generating article...");const n=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const t=await K("generate_article_from_live_news",{post_id:n,keyword:d,category_title:e.title,category_sources:e.articles,generate_image:!1});if(!t.success)throw new Error(t.data);if(((e,t,a)=>{const n=document.body.classList.contains("block-editor-page"),r=window.marked?window.marked.parse(t):t;if(n){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(r),a=wp.data.select("core/block-editor").getBlocks();if(a.length>0&&(1!==a.length||"core/paragraph"!==a[0].name||""!==a[0].attributes.content)){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(r):jQuery("#content").val(r);a&&a.trim()&&(console.log("ATM: Attempting to populate subtitle:",a),setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0?(console.log("ATM: Found SmartMag subtitle field, populating..."),e.val(a),e.trigger("input").trigger("change").trigger("keyup"),console.log("ATM: Subtitle populated successfully")):console.log("ATM: SmartMag subtitle field not found")},1e3))})(t.data.article_title,t.data.article_content,t.data.subtitle||""),c("✅ Article generated successfully!"),t.data.subtitle&&(c("✅ Article inserted! Saving post to apply subtitle..."),await y(),c("✅ Article and subtitle saved!")),h){c("Saving post..."),await y(),c("Generating featured image...");const e=await K("generate_featured_image",{post_id:n,prompt:""});e.success?c("✅ All done! Featured image generated."):(alert("Article was generated and saved, but the image failed: "+e.data),c("✅ Article generated! (Image generation failed)"))}}catch(e){c(`Error: ${e.message}`)}finally{t(!1),f(null)}})(a,r),disabled:e||k,className:"atm-generate-from-category"},b===r?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null),"Generating..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z",fill:"currentColor"})),"Generate Article from This Topic"))));return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-live-news-search"},(0,n.createElement)(l.TextControl,{label:"Search Keyword",value:d,onChange:m,placeholder:"e.g., Donald Trump, climate change, artificial intelligence",disabled:a||e,help:"Enter a keyword to search for the latest news"}),(0,n.createElement)(l.CheckboxControl,{label:"Force fresh search (bypass 3-hour cache)",checked:u,onChange:p,disabled:a||e}),(0,n.createElement)(l.CheckboxControl,{label:"Also generate a featured image",checked:h,onChange:v,disabled:a||e}),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(d.trim()){o(!0),c("Searching for latest news..."),E([]);try{const e=await K("search_live_news",{keyword:d,force_fresh:u});if(!e.success)throw new Error(e.data);E(e.data.categories||[]),c(`Found ${e.data.categories?.length||0} news categories`)}catch(e){c(`Error: ${e.message}`),E([])}finally{o(!1)}}else alert("Please enter a keyword to search for news.")},disabled:a||e||!d.trim(),className:"atm-search-live-news"},a?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,null),"Searching..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),"Search Live News"))),s&&(0,n.createElement)("p",{className:"atm-status-message "+(s.includes("✅")?"success":s.includes("Error")?"error":"info")},s),w.length>0&&(0,n.createElement)("div",{className:"atm-live-news-results"},(0,n.createElement)("div",{className:"atm-results-header"},(0,n.createElement)("h3",null,'Latest News about "',d,'"'),(0,n.createElement)("p",null,"Found ",w.length," topic categories with related articles")),(0,n.createElement)("div",{className:"atm-news-categories"},w.map((e,t)=>(0,n.createElement)(S,{key:t,category:e,categoryIndex:t})))))},Y=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),J=["English","Spanish","French","German","Italian","Portuguese","Russian","Chinese","Japanese","Korean","Arabic","Dutch","Swedish","Norwegian","Danish","Finnish","Polish","Czech","Hungarian","Romanian","Bulgarian","Croatian","Slovak","Slovenian","Estonian","Latvian","Lithuanian","Greek","Turkish","Hindi","Bengali","Urdu","Tamil","Telugu","Marathi","Thai","Vietnamese","Indonesian","Malay","Filipino","Hebrew","Persian"],X=["Albania","Andorra","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahrain","Belarus","Belgium","Bolivia","Bosnia and Herzegovina","Brazil","Bulgaria","Canada","Chile","China","Colombia","Croatia","Cyprus","Czech Republic","Denmark","Ecuador","Egypt","Estonia","Finland","France","Georgia","Germany","Greece","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Japan","Jordan","Kazakhstan","Kenya","Kosovo","Kuwait","Latvia","Lebanon","Liechtenstein","Lithuania","Luxembourg","Malaysia","Malta","Mexico","Moldova","Monaco","Montenegro","Netherlands","Nigeria","North Macedonia","Norway","Oman","Palestine","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","San Marino","Saudi Arabia","Serbia","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sweden","Switzerland","Syria","Taiwan","Thailand","Turkey","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Vatican City","Venezuela","Vietnam","Yemen"],ee=({label:e,placeholder:t,options:a,value:l,onChange:o,multiSelect:i=!1,disabled:s=!1})=>{const[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),[p,g]=(0,r.useState)(a),h=(0,r.useRef)(null),v=(0,r.useRef)(null);return(0,r.useEffect)(()=>{g(a.filter(e=>e.toLowerCase().includes(m.toLowerCase())))},[m,a]),(0,r.useEffect)(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&(d(!1),u(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.createElement)("div",{className:"atm-advanced-filter",ref:h},(0,n.createElement)("label",{className:"atm-filter-label"},e),(0,n.createElement)("div",{className:`atm-filter-input-container ${c?"open":""} ${s?"disabled":""}`,onClick:()=>!s&&d(!0)},i&&Array.isArray(l)&&l.length>0?(0,n.createElement)("div",{className:"atm-tags-container"},l.map(e=>(0,n.createElement)("div",{key:e,className:"atm-filter-tag"},(0,n.createElement)("span",null,e),(0,n.createElement)("button",{type:"button",onClick:t=>{var a;t.stopPropagation(),a=e,i&&Array.isArray(l)&&o(l.filter(e=>e!==a))},className:"atm-tag-remove"},"×")))):null,!i&&l?(0,n.createElement)("div",{className:"atm-single-value"},l):null,(0,n.createElement)("input",{ref:v,type:"text",value:m,onChange:e=>u(e.target.value),placeholder:t,className:"atm-filter-input",onFocus:()=>!s&&d(!0),disabled:s}),(0,n.createElement)("svg",{className:"atm-filter-chevron "+(c?"open":""),width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},(0,n.createElement)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))),c&&(0,n.createElement)("div",{className:"atm-filter-dropdown"},p.length>0?p.map(e=>(0,n.createElement)("div",{key:e,className:`atm-filter-option ${i&&Array.isArray(l)&&l.includes(e)?"selected":""} ${i||l!==e?"":"selected"}`,onClick:()=>(e=>{if(i){const t=Array.isArray(l)?[...l]:[];t.includes(e)?o(t.filter(t=>t!==e)):o([...t,e]),u(""),v.current?.focus()}else o(e),d(!1),u("")})(e)},e,i&&Array.isArray(l)&&l.includes(e)&&(0,n.createElement)("svg",{className:"atm-option-check",width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor"},(0,n.createElement)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))):(0,n.createElement)("div",{className:"atm-filter-no-results"},"No results found")))},te=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[i,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[p,g]=(0,r.useState)(null),[h,v]=(0,r.useState)(1),[w,E]=(0,r.useState)(0),[b,f]=(0,r.useState)({}),[y,k]=(0,r.useState)("English"),[_,S]=(0,r.useState)([]),[C,N]=(0,r.useState)(["United States"]),x=Math.ceil(w/10),T=async(e=1)=>{if(c.trim()){t(!0),s("Searching Google News..."),1===e&&(u([]),f({}));try{const t=await Y("search_google_news",{query:c,page:e,per_page:10,article_language:y,source_languages:_,countries:C});if(!t.success)throw new Error(t.data);u(t.data.articles||[]),E(t.data.total||t.data.articles?.length||0),v(e),s(`Found ${t.data.total||t.data.articles?.length||0} news articles`)}catch(e){s(`Error: ${e.message}`),u([]),E(0)}finally{t(!1)}}else alert("Please enter a search term.")},A=t=>{t>=1&&t<=x&&!e&&T(t)};return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-news-search-form"},(0,n.createElement)(l.TextControl,{label:"Search Google News",value:c,onChange:d,placeholder:"e.g., artificial intelligence, climate change, elections",disabled:e||a,help:"Enter keywords to search for recent news articles"}),(0,n.createElement)("div",{className:"atm-advanced-filters-container"},(0,n.createElement)("h3",{className:"atm-filters-title"},"Advanced Filters"),(0,n.createElement)("div",{className:"atm-filters-grid"},(0,n.createElement)(ee,{label:"Article Language",placeholder:"Select language for generated article...",options:J,value:y,onChange:k,multiSelect:!1,disabled:e||a}),(0,n.createElement)(ee,{label:"Source Languages",placeholder:"Search source languages...",options:J,value:_,onChange:S,multiSelect:!0,disabled:e||a}),(0,n.createElement)(ee,{label:"Countries",placeholder:"Search countries...",options:X,value:C,onChange:N,multiSelect:!0,disabled:e||a}))),(0,n.createElement)(l.Button,{isPrimary:!0,onClick:()=>T(1),disabled:e||a||!c.trim(),className:"atm-search-news-btn"},e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Searching..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},(0,n.createElement)("path",{d:"M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),"Search Google News"))),i&&(0,n.createElement)("p",{className:"atm-status-message "+(i.includes("✅")?"success":i.includes("Error")?"error":"info")},i),m.length>0&&(0,n.createElement)("div",{className:"atm-news-search-results"},(0,n.createElement)("div",{className:"atm-results-header"},(0,n.createElement)("h3",null,'News Search Results for "',c,'"'),(0,n.createElement)("p",null,"Found ",w," recent articles",y&&` (generating in ${y})`,_.length>0&&` from sources in: ${_.join(", ")}`,C.length>0&&` in: ${C.join(", ")}`)),(0,n.createElement)("div",{className:"atm-news-results-grid"},m.map((e,t)=>(0,n.createElement)("div",{key:t,className:`atm-news-item-card \n            ${p===t?"atm-news-item-generating":""} \n            ${e.is_used?"atm-news-item-used":""}`},(0,n.createElement)("div",{className:"atm-news-content-wrapper"},(0,n.createElement)("div",{className:"atm-news-thumbnail"},e.image?(0,n.createElement)("img",{src:e.image,alt:e.title}):(0,n.createElement)("div",{className:"atm-news-placeholder"},(0,n.createElement)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor"},(0,n.createElement)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 \r 1.1.9 2 2 2h14c1.1 0 2-.9 \r 2-2V5c0-1.1-.9-2-2-2zM9 \r 17H7v-7h2v7zm4 0h-2V7h2v10zm4 \r 0h-2v-4h2v4z"})))),(0,n.createElement)("div",{className:"atm-news-text-content"},(0,n.createElement)("h4",{className:"atm-news-title"},e.title),(0,n.createElement)("div",{className:"atm-news-meta"},(0,n.createElement)("span",{className:"atm-news-source"},e.source),(0,n.createElement)("span",{className:"atm-news-date"},e.date),(0,n.createElement)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"atm-view-source-link"},"View Source")),(0,n.createElement)("p",{className:"atm-news-description"},e.snippet))),e.is_used&&(0,n.createElement)("div",{className:"atm-used-article-badge"},"Already Used"),(0,n.createElement)("div",{className:"atm-news-actions"},(0,n.createElement)("button",{className:"atm-generate-article-btn",onClick:()=>(async(e,t)=>{g(t),o(!0),s(`Generating article from "${e.title}"...`);const a=document.getElementById("atm-studio-root").getAttribute("data-post-id"),n=b[t]||!1;try{const r=await Y("generate_article_from_news_source",{post_id:a,source_url:e.link,source_title:e.title,source_snippet:e.snippet,source_date:e.date,source_domain:e.source,article_language:y,generate_image:!1});if(!r.success)throw new Error(r.data);if(((e,t,a)=>{const n=document.body.classList.contains("block-editor-page"),r=window.marked?window.marked.parse(t):t;if(n){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(r),a=wp.data.select("core/block-editor").getBlocks();if(a.length>0&&(1!==a.length||"core/paragraph"!==a[0].name||""!==a[0].attributes.content)){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(r):jQuery("#content").val(r);a&&a.trim()&&(console.log("ATM: Attempting to populate subtitle:",a),setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0?(console.log("ATM: Found SmartMag subtitle field, populating..."),e.val(a),e.trigger("input").trigger("change").trigger("keyup"),console.log("ATM: Subtitle populated successfully")):console.log("ATM: SmartMag subtitle field not found")},1e3))})(r.data.article_title,r.data.article_content,r.data.subtitle||""),n){s(`Article generated from "${e.title}"! Now saving post...`),await wp.data.dispatch("core/editor").savePost(),s("Post saved! Generating featured image...");try{const n=await Y("generate_featured_image",{post_id:a,prompt:""});if(n.success)return s(`Article and featured image generated successfully from "${e.title}"! Reloading to display image...`),void setTimeout(()=>window.location.reload(),2e3);s(`Article generated from "${e.title}"! Image generation failed: ${n.data}`),setTimeout(()=>{u(e=>e.filter((e,a)=>a!==t)),f(e=>{const a={...e};return delete a[t],a})},3e3)}catch(a){s(`Article generated from "${e.title}"! Image generation encountered an error.`),console.error("Image generation error:",a),setTimeout(()=>{u(e=>e.filter((e,a)=>a!==t)),f(e=>{const a={...e};return delete a[t],a})},3e3)}}else s(`Article generated from "${e.title}"!`),setTimeout(()=>{u(e=>e.filter((e,a)=>a!==t)),f(e=>{const a={...e};return delete a[t],a})},2e3)}catch(e){s(`Error: ${e.message}`)}finally{o(!1),g(null)}})(e,t),disabled:a||e.is_used},e.is_used?"Already Used":p===t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Generating..."):"Generate Article"),!e.is_used&&(0,n.createElement)("div",{className:"atm-image-checkbox-wrapper"},(0,n.createElement)("input",{type:"checkbox",id:`generate-image-${t}`,checked:b[t]||!1,onChange:e=>((e,t)=>{f(a=>({...a,[e]:t}))})(t,e.target.checked),disabled:a}),(0,n.createElement)("label",{htmlFor:`generate-image-${t}`},"Also generate featured image")))))),(()=>{if(x<=1)return null;const t=[];let a=Math.max(1,h-Math.floor(2.5)),r=Math.min(x,a+5-1);r-a+1<5&&(a=Math.max(1,r-5+1));for(let e=a;e<=r;e++)t.push(e);return(0,n.createElement)("div",{className:"atm-news-pagination"},(0,n.createElement)("button",{className:"atm-pagination-btn",onClick:()=>A(h-1),disabled:1===h||e},"← Previous"),a>1&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("button",{className:"atm-pagination-btn",onClick:()=>A(1),disabled:e},"1"),a>2&&(0,n.createElement)("span",{className:"atm-pagination-info"},"...")),t.map(t=>(0,n.createElement)("button",{key:t,className:"atm-pagination-btn "+(t===h?"active":""),onClick:()=>A(t),disabled:e},t)),r<x&&(0,n.createElement)(n.Fragment,null,r<x-1&&(0,n.createElement)("span",{className:"atm-pagination-info"},"..."),(0,n.createElement)("button",{className:"atm-pagination-btn",onClick:()=>A(x),disabled:e},x)),(0,n.createElement)("button",{className:"atm-pagination-btn",onClick:()=>A(h+1),disabled:h===x||e},"Next →"),(0,n.createElement)("div",{className:"atm-pagination-info"},"Page ",h," of ",x," (",w," results)"))})()),0===m.length&&c&&!e&&(0,n.createElement)("div",{className:"atm-news-empty-state"},(0,n.createElement)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},(0,n.createElement)("circle",{cx:"11",cy:"11",r:"8"}),(0,n.createElement)("path",{d:"M21 21l-4.35-4.35"})),(0,n.createElement)("h3",null,"No results found"),(0,n.createElement)("p",null,"Try searching with different keywords or check your spelling.")))},ae=(e,t)=>jQuery.ajax({url:atm_studio_data.ajax_url,type:"POST",data:{action:e,nonce:atm_studio_data.nonce,...t}}),ne=function(){const[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[i,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[p,g]=(0,r.useState)(new Set),[h,v]=(0,r.useState)("English"),[w,E]=(0,r.useState)(!0),[b,f]=(0,r.useState)(!0),[y,k]=(0,r.useState)(1e4),_=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString();return(0,n.createElement)("div",{className:"atm-form-container"},(0,n.createElement)("div",{className:"atm-twitter-news-form"},(0,n.createElement)("div",{className:"atm-twitter-header"},(0,n.createElement)("h3",null,"🐦 Twitter/X News Search"),(0,n.createElement)("p",null,"Search for breaking news and credible information from verified Twitter sources")),(0,n.createElement)(l.TextControl,{label:"Search Twitter for News",value:c,onChange:d,placeholder:"e.g., breaking news, Trump, climate change",disabled:e||a,help:"Enter keywords to search for news on Twitter/X"}),(0,n.createElement)("div",{className:"atm-twitter-filters"},(0,n.createElement)("h4",null,"Search Filters"),(0,n.createElement)("div",{className:"atm-filters-grid"},(0,n.createElement)("div",{className:"atm-filter-group"},(0,n.createElement)("label",{htmlFor:"verified-only"},"Account Type:"),(0,n.createElement)("select",{id:"verified-only",value:w?"verified":"all",onChange:e=>E("verified"===e.target.value),disabled:e||a},(0,n.createElement)("option",{value:"all"},"All accounts"),(0,n.createElement)("option",{value:"verified"},"Verified only"))),(0,n.createElement)("div",{className:"atm-filter-group"},(0,n.createElement)("label",{htmlFor:"credible-sources"},"Source Type:"),(0,n.createElement)("select",{id:"credible-sources",value:b?"credible":"all",onChange:e=>f("credible"===e.target.value),disabled:e||a},(0,n.createElement)("option",{value:"all"},"All sources"),(0,n.createElement)("option",{value:"credible"},"Credible news only"))),(0,n.createElement)("div",{className:"atm-filter-group"},(0,n.createElement)("label",{htmlFor:"min-followers"},"Minimum followers:"),(0,n.createElement)("select",{id:"min-followers",value:y,onChange:e=>k(parseInt(e.target.value)),disabled:e||a},(0,n.createElement)("option",{value:1e3},"1K+ followers"),(0,n.createElement)("option",{value:1e4},"10K+ followers"),(0,n.createElement)("option",{value:5e4},"50K+ followers"),(0,n.createElement)("option",{value:1e5},"100K+ followers"),(0,n.createElement)("option",{value:1e6},"1M+ followers"))),(0,n.createElement)("div",{className:"atm-filter-group"},(0,n.createElement)("label",{htmlFor:"article-language"},"Article Language:"),(0,n.createElement)("select",{id:"article-language",value:h,onChange:e=>v(e.target.value),disabled:e||a},(0,n.createElement)("option",{value:"English"},"English"),(0,n.createElement)("option",{value:"Spanish"},"Spanish"),(0,n.createElement)("option",{value:"French"},"French"),(0,n.createElement)("option",{value:"German"},"German"),(0,n.createElement)("option",{value:"Portuguese"},"Portuguese"),(0,n.createElement)("option",{value:"Italian"},"Italian"),(0,n.createElement)("option",{value:"Arabic"},"Arabic"))))),(0,n.createElement)("div",{className:"atm-twitter-actions"},(0,n.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{if(c.trim()){t(!0),s("Searching Twitter for credible news sources..."),u([]),g(new Set);try{const e=await ae("search_twitter_news",{keyword:c,verified_only:w,credible_sources_only:b,min_followers:y,max_results:20});if(!e.success)throw new Error(e.data);u(e.data.results||[]),s(`Found ${e.data.total||0} credible tweets about "${c}"`)}catch(e){s(`Error: ${e.message}`),u([])}finally{t(!1)}}else alert("Please enter a search term.")},disabled:e||a||!c.trim(),className:"atm-search-twitter-btn"},e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Searching Twitter..."):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},(0,n.createElement)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})),"Search Twitter")),p.size>0&&(0,n.createElement)(l.Button,{isSecondary:!0,onClick:async()=>{if(0===p.size)return void alert("Please select at least one tweet to generate an article.");o(!0),s("Generating article from selected tweets...");const e=document.getElementById("atm-studio-root").getAttribute("data-post-id");try{const t=m.filter(e=>p.has(e.id)),a=await ae("generate_article_from_tweets",{post_id:e,keyword:c,selected_tweets:t,article_language:h});if(!a.success)throw new Error(a.data);((e,t,a)=>{const n=document.body.classList.contains("block-editor-page"),r=window.marked?window.marked.parse(t):t;if(n){wp.data.dispatch("core/editor").editPost({title:e});const t=wp.blocks.parse(r),a=wp.data.select("core/block-editor").getBlocks();if(a.length>0&&(1!==a.length||"core/paragraph"!==a[0].name||""!==a[0].attributes.content)){const e=a.map(e=>e.clientId);wp.data.dispatch("core/block-editor").removeBlocks(e)}wp.data.dispatch("core/block-editor").insertBlocks(t)}else jQuery("#title").val(e),jQuery("#title-prompt-text").hide(),jQuery("#title").trigger("blur"),window.tinymce&&window.tinymce.get("content")?window.tinymce.get("content").setContent(r):jQuery("#content").val(r);a&&a.trim()&&setTimeout(function(){const e=jQuery('input[name="_bunyad_sub_title"]');e.length>0&&(e.val(a),e.trigger("input").trigger("change").trigger("keyup"))},1e3)})(a.data.article_title,a.data.article_content,a.data.subtitle||""),s(`Article generated successfully from ${p.size} tweets!`)}catch(e){s(`Error: ${e.message}`)}finally{o(!1)}},disabled:a||0===p.size,className:"atm-generate-twitter-article-btn"},a?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.Spinner,null),"Generating Article..."):`Generate Article from ${p.size} Selected Tweets`))),i&&(0,n.createElement)("p",{className:"atm-status-message "+(i.includes("Error")?"error":"info")},i),m.length>0&&(0,n.createElement)("div",{className:"atm-twitter-results"},(0,n.createElement)("div",{className:"atm-results-header"},(0,n.createElement)("h3",null,'Twitter Results for "',c,'"'),(0,n.createElement)("p",null,"Select tweets to include in your article. Higher credibility scores appear first.")),(0,n.createElement)("div",{className:"atm-tweets-grid"},m.map(e=>(0,n.createElement)("div",{key:e.id,className:"atm-tweet-card "+(p.has(e.id)?"selected":"")},(0,n.createElement)("div",{className:"atm-tweet-header"},(0,n.createElement)("div",{className:"atm-tweet-user"},(0,n.createElement)("img",{src:e.user.profile_image,alt:e.user.name,className:"atm-user-avatar"}),(0,n.createElement)("div",{className:"atm-user-info"},(0,n.createElement)("div",{className:"atm-user-name"},e.user.name,e.user.verified&&(0,n.createElement)("span",{className:"atm-verified"},"✓")),(0,n.createElement)("div",{className:"atm-user-handle"},"@",e.user.screen_name),(0,n.createElement)("div",{className:"atm-user-followers"},_(e.user.followers)," followers"))),(e=>e.is_credible_source?(0,n.createElement)("span",{className:"atm-credibility-badge credible-source"},"📰 Credible Source"):e.user.verified?(0,n.createElement)("span",{className:"atm-credibility-badge verified"},"✓ Verified"):null)(e)),(0,n.createElement)("div",{className:"atm-tweet-content"},(0,n.createElement)("p",null,e.text),e.media.length>0&&(0,n.createElement)("div",{className:"atm-tweet-media"},e.media.map((e,t)=>(0,n.createElement)("img",{key:t,src:e.url,alt:"Tweet media",className:"atm-tweet-image"})))),(0,n.createElement)("div",{className:"atm-tweet-meta"},(0,n.createElement)("div",{className:"atm-tweet-date"},e.formatted_date),(0,n.createElement)("div",{className:"atm-tweet-engagement"},(0,n.createElement)("span",null,"🔄 ",_(e.metrics.retweets)),(0,n.createElement)("span",null,"❤️ ",_(e.metrics.likes)),e.credibility_score&&(0,n.createElement)("span",{className:"atm-credibility-score"},"📊 ",e.credibility_score,"/100"))),(0,n.createElement)("div",{className:"atm-tweet-actions"},(0,n.createElement)("input",{type:"checkbox",id:`tweet-${e.id}`,checked:p.has(e.id),onChange:()=>(e=>{const t=new Set(p);t.has(e)?t.delete(e):t.add(e),g(t)})(e.id),disabled:a}),(0,n.createElement)("label",{htmlFor:`tweet-${e.id}`},"Include in article"),e.urls.length>0&&(0,n.createElement)("div",{className:"atm-tweet-links"},e.urls.map((e,t)=>(0,n.createElement)("a",{key:t,href:e.expanded_url,target:"_blank",rel:"noopener noreferrer",className:"atm-tweet-link"},"🔗 ",e.display_url)))))))),0===m.length&&c&&!e&&(0,n.createElement)("div",{className:"atm-twitter-empty-state"},(0,n.createElement)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},(0,n.createElement)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})),(0,n.createElement)("h3",null,"No credible tweets found"),(0,n.createElement)("p",null,"Try different keywords or adjust your filters to find more results.")))},re=function({setActiveView:e}){const[t,a]=(0,r.useState)("search"),l=[{id:"search",title:"News Search",description:"Search Google News and generate articles from sources",icon:(0,n.createElement)("svg",{fill:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.75 8.36,4.73 12.19,4.73C14.76,4.73 16.04,5.72 17.04,6.58L19.34,4.32C17.23,2.5 14.86,1.5 12.2,1.5C6.42,1.5 2.03,5.82 2.03,12C2.03,18.18 6.42,22.5 12.2,22.5C17.6,22.5 21.95,18.63 21.95,12.31C21.95,11.76 21.64,11.1 21.35,11.1Z"})),gradient:"from-indigo-500 to-blue-600"},{id:"twitter",title:"Twitter/X News",description:"Generate articles from Twitter news sources",icon:(0,n.createElement)("svg",{fill:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})),gradient:"from-slate-800 to-black"},{id:"rss",title:"RSS Feeds",description:"Generate articles from RSS feed sources",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})),gradient:"from-orange-500 to-red-600"},{id:"apis",title:"APIs News",description:"Create articles from news API sources",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h14l2 2v12a2 2 0 01-2 2zM3 4h16M7 8h10M7 12h6"})),gradient:"from-emerald-500 to-green-600"},{id:"live",title:"Live News",description:"Search and categorize latest news with AI",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z"})),gradient:"from-blue-500 to-purple-600"}];return(0,n.createElement)("div",{className:"atm-generator-view"},(0,n.createElement)("div",{className:"atm-type-selector"},(0,n.createElement)("div",{className:"atm-type-cards"},l.map(e=>(0,n.createElement)("div",{key:e.id,className:"atm-type-card "+(t===e.id?"active":""),onClick:()=>a(e.id)},(0,n.createElement)("div",{className:`atm-type-icon bg-gradient-to-r ${e.gradient}`},e.icon),(0,n.createElement)("div",{className:"atm-type-content"},(0,n.createElement)("h3",null,e.title),(0,n.createElement)("p",null,e.description)))))),(0,n.createElement)("div",{className:"atm-tab-content"},"search"===t&&(0,n.createElement)(te,null),"twitter"===t&&(0,n.createElement)(ne,null),"rss"===t&&(0,n.createElement)(Q,null),"apis"===t&&(0,n.createElement)(q,null),"live"===t&&(0,n.createElement)(Z,null)))},le=function({setActiveView:e}){const[t,a]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[d,m]=(0,r.useState)({provider:"stealthgpt",tone:"conversational",mode:"High",businessMode:!0,preserveFormatting:!0,autoReplace:!1,model:"anthropic/claude-3.5-sonnet"}),[u,p]=(0,r.useState)({originalWords:0,humanizedWords:0,detectionScore:null,creditsUsed:0,processingTime:0}),[g,h]=(0,r.useState)(""),v={stealthgpt:"StealthGPT (Recommended)",openrouter:"OpenRouter (Claude/GPT-4)",undetectable:"Undetectable.AI",combo:"Combo (Multiple Passes)"};(0,r.useEffect)(()=>{w()},[]);const w=()=>{try{if(window.wp&&window.wp.data){const e=window.wp.data.select("core/editor").getEditedPostContent();e&&(i(e),p(t=>({...t,originalWords:b(E(e))})))}else if(window.tinymce&&window.tinymce.activeEditor){const e=window.tinymce.activeEditor.getContent({format:"html"});i(e),p(t=>({...t,originalWords:b(E(e))}))}else console.warn("No editor found. Content must be entered manually.")}catch(e){console.error("Error loading editor content:",e)}},E=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},b=e=>e&&"string"==typeof e?e.trim().split(/\s+/).filter(e=>e.length>0).length:0,f=async(t=!1)=>{if(s)try{if(window.wp&&window.wp.data&&window.wp.data.select("core/editor")){const{dispatch:e}=window.wp.data,t=window.wp.data.select("core/block-editor").getBlocks();if(t.length>0){const a=t.map(e=>e.clientId);e("core/block-editor").removeBlocks(a)}const a=window.wp.blocks.parse(s);e("core/block-editor").insertBlocks(a)}else if(window.tinymce&&window.tinymce.activeEditor)window.tinymce.activeEditor.setContent(s);else{const e=document.getElementById("content");if(!e)throw new Error("No editor found to replace content");e.value=s,e.dispatchEvent(new Event("input",{bubbles:!0}))}t||alert("✅ Content successfully replaced in editor!"),d.autoReplace&&e("hub")}catch(e){console.error("Content replacement error:",e),t||alert("⚠ Failed to replace content in editor: "+e.message)}else t||alert("No humanized content available to replace.")},y=()=>{switch(d.provider){case"stealthgpt":return{description:"Most effective for bypassing AI detection. Uses advanced algorithms specialized for undetectability.",cost:(d.businessMode?"30":"10")+" credits per 100 words",speed:"Fast (30-60 seconds)",features:["Best AI detection bypass","Business mode available","Multiple tones"]};case"openrouter":return{description:"Uses the most powerful AI models like Claude 3.5 Sonnet for natural, high-quality humanization.",cost:"5-15 credits per 100 words (varies by model)",speed:"Very Fast (10-30 seconds)",features:["Most natural results","Latest AI models","Fast processing"]};case"undetectable":return{description:"Specialized service focused specifically on making content undetectable by AI detection tools.",cost:"15 credits per 100 words",speed:"Moderate (60-120 seconds)",features:["Detection-focused","Reliable results","Good alternative"]};case"combo":return{description:"Uses multiple providers in sequence for maximum human-like quality and undetectability.",cost:"40-50 credits per 100 words",speed:"Slow (120-180 seconds)",features:["Highest quality","Multiple passes","Best results"]};default:return{description:"",cost:"",speed:"",features:[]}}},k=()=>{const e=u.originalWords,t=Math.ceil(e/100);switch(d.provider){case"stealthgpt":return t*(d.businessMode?30:10);case"openrouter":return t*({"anthropic/claude-3.5-sonnet":8,"openai/gpt-4o":6,"anthropic/claude-3-opus":15,"openai/gpt-4-turbo":10,"google/gemini-pro-1.5":8,"meta-llama/llama-3.1-405b-instruct":12,"mistralai/mistral-large":10,"cohere/command-r-plus":8}[d.model]||8);case"undetectable":return 15*t;case"combo":return 45*t;default:return 0}},_=y();return(0,n.createElement)("div",{className:"atm-humanize-container"},(0,n.createElement)("div",{className:"atm-humanize-header"},(0,n.createElement)("h2",null,"🧠 Humanize AI Content"),(0,n.createElement)("p",null,"Transform AI-generated content into natural, human-like text that bypasses AI detection with advanced algorithms and multiple provider options.")),(0,n.createElement)("div",{className:"atm-provider-panel"},(0,n.createElement)("h3",null,"Choose Humanization Provider"),(0,n.createElement)("div",{className:"atm-provider-grid"},Object.entries(v).map(([e,t])=>(0,n.createElement)("div",{key:e,className:"atm-provider-card "+(d.provider===e?"active":""),onClick:()=>m(t=>({...t,provider:e}))},(0,n.createElement)("div",{className:"provider-header"},(0,n.createElement)("input",{type:"radio",name:"provider",value:e,checked:d.provider===e,onChange:()=>m(t=>({...t,provider:e}))}),(0,n.createElement)("label",null,t),"stealthgpt"===e&&(0,n.createElement)("span",{className:"recommended-badge"},"Recommended"),"combo"===e&&(0,n.createElement)("span",{className:"recommended-badge",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"}},"Premium")),(0,n.createElement)("div",{className:"provider-info"},(0,n.createElement)("p",{className:"description"},_.description),(0,n.createElement)("div",{className:"provider-stats"},(0,n.createElement)("span",{className:"cost"},"💰"," ",e===d.provider?_.cost:y().cost),(0,n.createElement)("span",{className:"speed"},"⚡"," ",e===d.provider?_.speed:y().speed)),e===d.provider&&_.features&&(0,n.createElement)("div",{className:"provider-features"},_.features.map((e,t)=>(0,n.createElement)("span",{key:t,className:"feature-tag"},e)))))))),(0,n.createElement)("div",{className:"atm-settings-panel"},(0,n.createElement)("div",{className:"settings-header"},(0,n.createElement)("h3",{style:{color:"#fff"}},"Humanization Settings")),(0,n.createElement)("div",{className:"atm-settings-grid"},(0,n.createElement)("div",{className:"atm-setting-group"},(0,n.createElement)("label",{style:{color:"#fff"}},"Writing Tone:"),(0,n.createElement)("select",{value:d.tone,onChange:e=>m(t=>({...t,tone:e.target.value})),disabled:t},Object.entries({conversational:"Conversational & Natural",professional:"Professional",casual:"Casual & Friendly",academic:"Academic",journalistic:"Journalistic",creative:"Creative & Engaging",technical:"Technical",persuasive:"Persuasive",storytelling:"Storytelling"}).map(([e,t])=>(0,n.createElement)("option",{key:e,value:e},t))),(0,n.createElement)("p",{className:"setting-description"},"Choose the writing style that best fits your content's purpose.")),"openrouter"===d.provider&&(0,n.createElement)("div",{className:"atm-setting-group"},(0,n.createElement)("label",{style:{color:"#fff"}},"AI Model:"),(0,n.createElement)("select",{value:d.model,onChange:e=>m(t=>({...t,model:e.target.value})),disabled:t},Object.entries({"anthropic/claude-3.5-sonnet":"Claude 3.5 Sonnet (Best Overall)","openai/gpt-4o":"GPT-4o (OpenAI Latest)","anthropic/claude-3-opus":"Claude 3 Opus (Most Intelligent)","openai/gpt-4-turbo":"GPT-4 Turbo","google/gemini-pro-1.5":"Gemini Pro 1.5","meta-llama/llama-3.1-405b-instruct":"Llama 3.1 405B","mistralai/mistral-large":"Mistral Large","cohere/command-r-plus":"Command R+"}).map(([e,t])=>(0,n.createElement)("option",{key:e,value:e},t))),(0,n.createElement)("p",{className:"setting-description"},"Select the AI model for humanization. Claude 3.5 Sonnet provides the best balance.")),("stealthgpt"===d.provider||"combo"===d.provider)&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"atm-setting-group"},(0,n.createElement)("label",{style:{color:"#fff"}},"Quality Mode:"),(0,n.createElement)("select",{value:d.mode,onChange:e=>m(t=>({...t,mode:e.target.value})),disabled:t},(0,n.createElement)("option",{value:"High"},"High Quality (slower, better results)"),(0,n.createElement)("option",{value:"Medium"},"Balanced (good speed and quality)"),(0,n.createElement)("option",{value:"Low"},"Fast (quick results)")),(0,n.createElement)("p",{className:"setting-description"},"Higher quality takes longer but produces better humanization.")))),(0,n.createElement)("div",{className:"atm-advanced-toggles",style:{display:"flex",gap:"16px",alignItems:"center",marginTop:"8px",flexWrap:"nowrap"}},("stealthgpt"===d.provider||"combo"===d.provider)&&(0,n.createElement)(l.ToggleControl,{className:"atm-toggle",label:(0,n.createElement)("span",{style:{color:"#fff"}},"Use Enhanced Model (10x more powerful, 3x cost)"),checked:!!d.businessMode,onChange:e=>m(t=>({...t,businessMode:!!e})),disabled:t}),(0,n.createElement)(l.ToggleControl,{className:"atm-toggle",label:(0,n.createElement)("span",{style:{color:"#fff"}},"Preserve HTML Formatting"),checked:!!d.preserveFormatting,onChange:e=>m(t=>({...t,preserveFormatting:!!e})),disabled:t}),(0,n.createElement)(l.ToggleControl,{className:"atm-toggle",label:(0,n.createElement)("span",{style:{color:"#fff"}},"Auto-replace in editor after humanization"),checked:!!d.autoReplace,onChange:e=>m(t=>({...t,autoReplace:!!e})),disabled:t}))),(0,n.createElement)("div",{className:"atm-content-area"},(0,n.createElement)("div",{className:"atm-content-section"},(0,n.createElement)("h3",null,"📝 Original Content"),(0,n.createElement)("div",{className:"atm-content-actions"},(0,n.createElement)("button",{onClick:w,className:"atm-btn atm-btn-secondary",disabled:t},"📄 Load from Editor"),(0,n.createElement)("span",{className:"atm-word-count"},u.originalWords," words",u.originalWords>0&&(0,n.createElement)("span",{className:"cost-preview"}," ","• ~",k()," credits"))),(0,n.createElement)("textarea",{value:o,onChange:e=>{i(e.target.value),p(t=>({...t,originalWords:b(E(e.target.value))}))},placeholder:"Content will be loaded from the editor, or you can paste it here...\n\nExample:\n- Blog posts from ChatGPT, Claude, or Gemini\n- AI-generated articles that need humanization\n- Content that was flagged by AI detectors\n- Any text that sounds too robotic or formal",rows:14,className:"atm-textarea",disabled:t})),(0,n.createElement)("div",{className:"atm-content-section"},(0,n.createElement)("h3",null,"✨ Humanized Content"),(0,n.createElement)("div",{className:"atm-content-actions"},(0,n.createElement)("button",{onClick:()=>f(!1),disabled:!s||t,className:"atm-btn atm-btn-primary "+(!s||t?"disabled":"")},"✅ Replace in Editor"),(0,n.createElement)("button",{onClick:async()=>{if(s)try{await navigator.clipboard.writeText(s),alert("📋 Humanized content copied to clipboard!")}catch(e){console.error("Copy failed:",e);const t=document.createElement("textarea");t.value=s,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("📋 Humanized content copied to clipboard!")}else alert("No humanized content to copy.")},disabled:!s||t,className:"atm-btn atm-btn-secondary "+(!s||t?"disabled":"")},"📋 Copy"),(0,n.createElement)("button",{onClick:async()=>{if(s){a(!0),h("Running AI detection analysis...");try{const e=await fetch(atm_ajax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"check_ai_detection",nonce:atm_ajax.nonce,content:s})}),t=await e.json();if(!t.success)throw new Error(t.data||"AI detection failed");p(e=>({...e,detectionScore:t.data.detection_score})),h(`🔍 Detection Score: ${t.data.detection_score}% AI detected - ${t.data.status}`)}catch(e){console.error("AI detection error:",e),alert(`❌ Error: ${e.message}`)}finally{a(!1),setTimeout(()=>h(""),7e3)}}else alert("No humanized content to check.")},disabled:!s||t,className:"atm-btn atm-btn-outline "+(!s||t?"disabled":"")},"🔍 Check Detection"),(0,n.createElement)("span",{className:"atm-word-count"},u.humanizedWords," words",u.creditsUsed>0&&(0,n.createElement)("span",{className:"credits-used"}," ","• ",u.creditsUsed," credits used"),u.processingTime>0&&(0,n.createElement)("span",{className:"processing-time"}," ","• ",Math.round(u.processingTime/1e3),"s"))),(0,n.createElement)("textarea",{value:s,onChange:e=>c(e.target.value),placeholder:"Humanized content will appear here...\n\nThe result will be:\n✅ Natural and human-like\n✅ Bypasses AI detection\n✅ Maintains original meaning\n✅ Improved readability\n✅ Authentic tone and flow",rows:14,className:"atm-textarea",disabled:t}))),null!==u.detectionScore&&(0,n.createElement)("div",{className:"atm-stats-panel"},(0,n.createElement)("h3",null,"🎯 AI Detection Analysis"),(0,n.createElement)("div",{className:"atm-detection-score "+(u.detectionScore<10?"success":u.detectionScore<30?"warning":"danger")},(0,n.createElement)("div",{className:"score-main"},(0,n.createElement)("span",{className:"score-value"},u.detectionScore,"%"),(0,n.createElement)("span",{className:"score-label"},"AI detected")),(0,n.createElement)("div",{className:"score-status"},u.detectionScore<10&&"✅ Excellent - Passes as human-written! Ready to publish.",u.detectionScore>=10&&u.detectionScore<30&&"⚠️ Good - Minor AI signatures detected. Consider light editing.",u.detectionScore>=30&&"❌ Poor - Clearly AI-generated. Try re-humanizing with enhanced settings."),(0,n.createElement)("div",{className:"score-recommendation"},u.detectionScore<10&&"Your content will bypass AI detectors like GPTZero, Originality.AI, and Turnitin.",u.detectionScore>=10&&u.detectionScore<30&&"Try using business mode or combo provider for better results.",u.detectionScore>=30&&"Consider manual editing or using a different tone/provider combination."))),(0,n.createElement)("div",{className:"atm-action-panel"},(0,n.createElement)("button",{onClick:async()=>{if(o.trim()){if(o.length<50)alert("Content must be at least 50 characters long for humanization.");else if(!("combo"===d.provider&&u.originalWords>500)||confirm("Combo mode with large content will use many credits. Continue?")){a(!0),h("Initializing humanization...");try{const e={action:"humanize_content",nonce:atm_ajax.nonce,content:o,provider:d.provider,tone:d.tone,mode:d.mode,business_mode:d.businessMode,preserve_formatting:d.preserveFormatting};"openrouter"===d.provider&&(e.model=d.model),h(`Processing with ${v[d.provider]}...`);const t=await fetch(atm_ajax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const a=await t.json();if(!a.success)throw new Error(a.data||"Humanization failed");{c(a.data.humanized_content),p(e=>({...e,humanizedWords:b(a.data.humanized_content),detectionScore:a.data.detection_score||null,creditsUsed:a.data.credits_used||0,processingTime:a.data.processing_time||0}));const e=a.data.credits_used?` (${a.data.credits_used} credits used)`:"",t=a.data.processing_time?` in ${Math.round(a.data.processing_time/1e3)}s`:"";h(`✅ Content successfully humanized${e}${t}!`),d.autoReplace&&await f(!0)}}catch(e){console.error("Humanization error:",e),h(""),alert(`❌ Error: ${e.message}`)}finally{a(!1),setTimeout(()=>h(""),8e3)}}}else alert("Please load content from the editor first or enter content manually.")},disabled:t||!o.trim(),className:"atm-btn atm-btn-primary atm-btn-large"},t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("span",{className:"spinner"}),"Processing..."):`🚀 Humanize with ${v[d.provider]}`),g&&(0,n.createElement)("div",{className:"atm-progress-message "+(g.includes("✅")?"success":g.includes("❌")?"error":"")},g),o.length>0&&o.length<50&&(0,n.createElement)("div",{className:"atm-warning-message"},"⚠️ Content is too short. Minimum 50 characters required for humanization.")),(0,n.createElement)("div",{className:"atm-help-section"},(0,n.createElement)("h3",null,"💡 Tips for Best Results"),(0,n.createElement)("div",{className:"atm-tips-grid"},(0,n.createElement)("div",{className:"tip-item"},(0,n.createElement)("h4",null,"🎯 Provider Selection"),(0,n.createElement)("ul",null,(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"StealthGPT:")," Best for bypassing AI detection tools like Turnitin and GPTZero"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"OpenRouter:")," Most natural-sounding results using advanced AI models"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"Combo:")," Maximum quality by combining multiple providers"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"Undetectable.AI:")," Reliable alternative focused on detection bypass"))),(0,n.createElement)("div",{className:"tip-item"},(0,n.createElement)("h4",null,"⚙️ Settings Optimization"),(0,n.createElement)("ul",null,(0,n.createElement)("li",null,"Use ",(0,n.createElement)("strong",null,"Enhanced Model")," for critical content that must pass detection"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"Conversational tone")," works best for blogs and articles"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"Professional tone")," for business and formal content"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"Academic tone")," for research papers and scholarly writing"))),(0,n.createElement)("div",{className:"tip-item"},(0,n.createElement)("h4",null,"📏 Content Guidelines"),(0,n.createElement)("ul",null,(0,n.createElement)("li",null,"Minimum 50 characters required for processing"),(0,n.createElement)("li",null,"Works best with 100+ words for optimal results"),(0,n.createElement)("li",null,"Break very long content (5000+ words) into sections"),(0,n.createElement)("li",null,"Preserve important formatting when possible"))),(0,n.createElement)("div",{className:"tip-item"},(0,n.createElement)("h4",null,"🔍 Detection Scores"),(0,n.createElement)("ul",null,(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"<10%:")," Excellent - Publish with confidence"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"10-30%:")," Good - Light manual editing recommended"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,"30-60%:")," Fair - Re-humanize with different settings"),(0,n.createElement)("li",null,(0,n.createElement)("strong",null,">60%:")," Poor - Manual rewriting or combo mode needed"))))),(0,n.createElement)("div",{className:"atm-cost-estimator"},(0,n.createElement)("h3",null,"💰 Cost Estimator"),(0,n.createElement)("div",{className:"cost-breakdown"},(0,n.createElement)("div",{className:"cost-item"},(0,n.createElement)("span",null,"Current Content:"),(0,n.createElement)("span",null,u.originalWords," words")),(0,n.createElement)("div",{className:"cost-item"},(0,n.createElement)("span",null,"Estimated Cost:"),(0,n.createElement)("span",{className:k()>100?"high-cost":k()>50?"medium-cost":"low-cost"},k()," credits")),(0,n.createElement)("div",{className:"cost-item"},(0,n.createElement)("span",null,"Provider:"),(0,n.createElement)("span",null,v[d.provider])),u.creditsUsed>0&&(0,n.createElement)("div",{className:"cost-item"},(0,n.createElement)("span",null,"Last Used:"),(0,n.createElement)("span",{className:"used-credits"},u.creditsUsed," credits")))))},oe=function(){const[e,t]=(0,r.useState)("hub"),a=[{section:"CONTENT GENERATION",items:[{id:"articles",label:"Generate Articles",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),color:"#6366f1"},{id:"news",label:"Generate News",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h14l2 2v12a2 2 0 01-2 2zM3 4h16M7 8h10M7 12h6"})),color:"#059669"},{id:"images",label:"Generate Images",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),color:"#10b981"},{id:"podcast",label:"Generate Podcast",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})),color:"#f97316"},{id:"takeaways",label:"Key Takeaways",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})),color:"#ec4899"}]},{section:"CONTENT ENHANCEMENT",items:[{id:"humanize",label:"Humanize AI Content",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),color:"#8b5cf6"}]},{section:"TOOLS & UTILITIES",items:[{id:"comments",label:"Generate Comments",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h6m6-2a8 8 0 11-16 0 8 8 0 0116 0zM7 16l-2 2 3-.5"})),color:"#0ea5e9"},{id:"speech",label:"Speech to Text",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})),color:"#6366f1"},{id:"translate",label:"Translate Text",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})),color:"#06b6d4"},{id:"video",label:"Video Search",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})),color:"#ef4444"},{id:"charts",label:"Generate Charts",icon:(0,n.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,n.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),color:"#10b981"}]}];return(0,n.createElement)("div",{className:"atm-studio-wrapper"},(0,n.createElement)("div",{className:"atm-sidebar"},(0,n.createElement)("div",{className:"atm-sidebar-header"},(0,n.createElement)("h2",null,"AI Studio"),(0,n.createElement)("p",null,"Content Creation Suite")),a.map((a,r)=>(0,n.createElement)("div",{key:r,className:"atm-nav-section"},(0,n.createElement)("div",{className:"atm-nav-section-title"},a.section),a.items.map(a=>(0,n.createElement)("button",{key:a.id,className:"atm-nav-item "+(e===a.id?"active":""),onClick:()=>t(a.id)},(0,n.createElement)("span",{className:"atm-nav-icon",style:{color:e===a.id?a.color:"rgba(255, 255, 255, 0.6)",transition:"color 0.2s ease"}},a.icon),a.label))))),(0,n.createElement)("div",{className:"atm-main-content"},"hub"!==e&&(0,n.createElement)("div",{className:"atm-content-header"},(0,n.createElement)("div",{className:"atm-content-header-inner"},(0,n.createElement)("button",{className:"atm-header-back-btn",onClick:()=>t("hub"),"aria-label":"Go back to hub"},(0,n.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,n.createElement)("div",{className:"atm-content-header-text"},(0,n.createElement)("h1",{className:"atm-content-title"},{hub:"AI Studio",articles:"Generate Articles",multipage:"Generate Multipage Article",news:"Generate News",humanize:"Humanize AI Content",images:"Generate Images",podcast:"Generate Podcast",takeaways:"Key Takeaways",comments:"Generate Comments",speech:"Speech to Text",translate:"Translate Text",video:"YouTube Video Search",charts:"Generate Charts"}[e]||"AI Studio"),(0,n.createElement)("p",{className:"atm-content-subtitle"},{hub:"Content Creation Suite",articles:"Create high-quality content with AI assistance",multipage:"Create comprehensive, multi-part guides with AI",news:"Create News from RSS feeds and live news sources",humanize:"Humanize AI-generated content for better readability",images:"Generate stunning visuals powered by AI",podcast:"Turn content into engaging audio experiences",takeaways:"Extract key insights from your content",comments:"Create realistic discussion threads based on your post",speech:"Convert audio into accurate text",translate:"Translate content across languages",video:"Find and embed YouTube videos",charts:"Create beautiful data visualizations"}[e]||"Content Creation Suite")))),(0,n.createElement)("div",{className:"atm-content-body"},(()=>{switch(e){case"hub":default:return(0,n.createElement)(o,{setActiveView:t});case"articles":return(0,n.createElement)(b,{setActiveView:t});case"multipage":return(0,n.createElement)(v,{setActiveView:t});case"news":return(0,n.createElement)(re,{setActiveView:t});case"images":return(0,n.createElement)(f,{setActiveView:t});case"podcast":return(0,n.createElement)(_,{setActiveView:t});case"takeaways":return(0,n.createElement)(C,{setActiveView:t});case"comments":return(0,n.createElement)(D,{setActiveView:t});case"speech":return(0,n.createElement)(N,{setActiveView:t});case"translate":return(0,n.createElement)(M,{setActiveView:t});case"video":return(0,n.createElement)(H,{setActiveView:t});case"charts":return(0,n.createElement)($,{setActiveView:t});case"humanize":return(0,n.createElement)(le,{setActiveView:t})}})())))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("atm-studio-root");e&&(0,r.render)((0,n.createElement)(oe,null),e)})})();